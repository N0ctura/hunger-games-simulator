(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{535:(e,t,r)=>{Promise.resolve().then(r.bind(r,9887))},9887:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eX});var a=r(5155),s=r(1567),l=r(2115),i=r(7364),o=r(5870),n=r(3075),d=r(3938);let c={x:0,y:0,scale:1},m=[{id:"villager",name:"Villico (Offline)",description:"Trova i lupi mannari e linciali.",team:"VILLAGER",aura:"GOOD",isAdvanced:!1,image:{url:"https://cdn.wolvesville.com/roleIcons/villager.png",width:128,height:128}},{id:"seer",name:"Veggente (Offline)",description:"Ogni notte puoi rivelare il ruolo di un giocatore.",team:"VILLAGER",aura:"GOOD",isAdvanced:!1,image:{url:"https://cdn.wolvesville.com/roleIcons/seer.png",width:128,height:128}},{id:"medium",name:"Medium (Offline)",description:"Puoi parlare con i morti di notte. Rianimi un giocatore una volta per partita.",team:"VILLAGER",aura:"GOOD",isAdvanced:!1,image:{url:"https://cdn.wolvesville.com/roleIcons/medium.png",width:128,height:128}},{id:"werewolf",name:"Lupo Mannaro (Offline)",description:"Uccidi i villici ogni notte.",team:"WEREWOLF",aura:"EVIL",isAdvanced:!1,image:{url:"https://cdn.wolvesville.com/roleIcons/werewolf.png",width:128,height:128}},{id:"jester",name:"Buffone (Offline)",description:"Fatti linciare dal villaggio per vincere.",team:"SOLO",aura:"NEUTRAL",isAdvanced:!1,image:{url:"https://cdn.wolvesville.com/roleIcons/jester.png",width:128,height:128}},{id:"analyst",name:"Analista (Offline Avanzato)",description:"Analizza i giocatori per scoprire il loro ruolo esatto.",team:"VILLAGER",aura:"GOOD",isAdvanced:!0,image:{url:"https://cdn.wolvesville.com/roleIcons/analyst.png",width:128,height:128}}],x=[{id:"offline_set",name:"Set Offline",items:[{id:"hat_offline",type:"HAT",rarity:"COMMON",imageUrl:"https://cdn.wolvesville.com/avatarItems/hat_santa_claus.png",name:"Cappello Offline"},{id:"shirt_offline",type:"SHIRT",rarity:"COMMON",imageUrl:"https://cdn.wolvesville.com/avatarItems/shirt_santa_claus.png",name:"Maglia Offline"}]}],u=[{id:"bg_village_offline",name:"Villaggio (Offline)",rarity:"COMMON",imageUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png",imageDayUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png",imageNightUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_night.png"}],p=[{id:"loading_offline",url:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png",rarity:"COMMON"}],g=[{id:"quest_offline",name:"Quest Offline",description:"Impossibile caricare le quest. Controlla la connessione.",rewards:[{type:"GOLD",amount:100}]}],h={"aura-seer":{name:"Veggente",rarity:"COMMON",cdnUrl:"https://cdn.wolvesville.com/roleIcons/aura-seer.png"},werewolf:{name:"Lupo Mannaro",rarity:"COMMON",cdnUrl:"https://cdn.wolvesville.com/roleIcons/werewolf.png"},bg_village:{name:"Villaggio (Default)",rarity:"COMMON",cdnUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png"}},b=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a="https://cdn.wolvesville.com",s=r?"@2x.png":".png";switch(t){case"role":return"".concat(a,"/roleIcons/").concat(e,".png");case"background":if("village_day"===e)return"".concat(a,"/backgrounds/wolvesville_large_day.png");return"".concat(a,"/backgrounds/").concat(e).concat("");case"avatar":return"".concat(a,"/avatarItems/").concat(e).concat(s);case"set":return"".concat(a,"/avatarItemSets/").concat(e).concat(s);default:return""}},f=[{id:"skin_pale",type:"SKIN",rarity:"COMMON",name:"Pale",imageUrl:"color:#F5D0B0",tags:["Skin","White"]},{id:"skin_tan",type:"SKIN",rarity:"COMMON",name:"Tan",imageUrl:"color:#E0AC69",tags:["Skin","Orange"]},{id:"skin_brown",type:"SKIN",rarity:"COMMON",name:"Brown",imageUrl:"color:#8D5524",tags:["Skin","Brown"]},{id:"skin_dark_brown",type:"SKIN",rarity:"COMMON",name:"Dark Brown",imageUrl:"color:#523218",tags:["Skin","Brown"]},{id:"skin_black",type:"SKIN",rarity:"COMMON",name:"Black",imageUrl:"color:#2B2B2B",tags:["Skin","Black"]},{id:"skin_grey",type:"SKIN",rarity:"COMMON",name:"Grey",imageUrl:"color:#7A7A7A",tags:["Skin","Grey"]},{id:"skin_werewolf",type:"SKIN",rarity:"COMMON",name:"Werewolf",imageUrl:"color:#607D8B",tags:["Skin","Blue","Grey"]},{id:"skin_white",type:"SKIN",rarity:"COMMON",name:"White",imageUrl:"color:#FFFFFF",tags:["Skin","White"]}],v={"1wL":{category:"HAT",name:"Top Hat"}};function y(e){try{let t=v[e.id],r=e.type||"SHIRT",a=r;"BODY"===a||"SKIN_COLOR"===a||"COLOR"===a||"BASE_BODY"===a||"APPEARANCE"===a?r="SKIN":"HAIRSTYLE"===a||"HAIR_COLOR"===a?r="HAIR":"HEAD_WEAR"===a?r="HAT":"EYE_WEAR"===a?r="GLASSES":"NECK_WEAR"===a?r="FRONT":"HAND_ITEM"===a?r="FRONT":"BACK_ITEM"===a||"BACK"===a?r="BACK":("PANTS"===a||"SHOES"===a||"CLOTHES"===a)&&(r="SHIRT");let s=e.name||"Item ".concat(e.id);return t&&(t.category&&(r=t.category),t.name&&(s=t.name)),r&&"UNKNOWN"!==r||(r="SHIRT"),{...e,type:r,name:s}}catch(t){return console.error("Error mapping item:",e.id,t),e}}let j="https://api.wolvesville.com",w="YGNrrmPwSWjVY9lAy9y7CiBLMeRUh3pEE4CTmIvfZwnaSp6X3uiQnsVAoDkdXLYW",N="f416123a-0ca8-432f-94e4-228afdef82e2",A={},k={async fetch(e,t,r){let a=Date.now();if(A[e]&&a-A[e].timestamp<6e5)return A[e].data;if(!w)return console.warn("[WovEngine] No API Key. Using fallback for ".concat(e)),t;let s=0;for(;s<3;)try{var l;let i=await fetch("".concat(j).concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Language":"it",Authorization:"Bot ".concat(w),...N?{"X-Bot-ID":N}:{}},next:{revalidate:3600}});if(429===i.status){let e=parseInt(i.headers.get("Retry-After")||"2");await new Promise(t=>setTimeout(t,1e3*e+1e3)),s++;continue}if(null==r?void 0:null===(l=r.allowedStatuses)||void 0===l?void 0:l.includes(i.status))return t;if(!i.ok)return(null==r?void 0:r.suppressErrors)||console.error("[WovEngine] API Error ".concat(i.status," for ").concat(e)),t;let o=await i.json(),n=o.items?o.items:o;return A[e]={data:n,timestamp:a},n}catch(a){if((null==r?void 0:r.suppressErrors)||console.warn("[WovEngine] Network attempt ".concat(s+1," failed for ").concat(e),a),++s>=3)return(null==r?void 0:r.suppressErrors)||console.error("[WovEngine] Final Network Exception for ".concat(e),a),t;await new Promise(e=>setTimeout(e,1e3*Math.pow(2,s)))}return t},async getRoles(){let e=await this.fetch("/roles",{roles:m}),t=e.roles?e.roles:e;if(!Array.isArray(t)||0===t.length)return console.warn("[WovEngine] Roles empty or invalid format, forcing fallback data"),m;let r=e.advancedRolesMapping||{},a=new Set;return Object.values(r).forEach(e=>{Array.isArray(e)&&e.forEach(e=>a.add(e))}),t.map(e=>({...e,isAdvanced:a.has(e.id)}))},async getAvatarSets(){return this.fetch("/items/avatarItemSets",x)},async getBundles(){return this.fetch("/items/bundles",[])},async getShopActiveOffers(){return this.fetch("/shop/activeOffers",[])},async getCalendars(){return this.fetch("/items/calendars",[])},async getAvatarItems(){return[...f,...(await this.fetch("/items/avatarItems",[])).map(y)]},async getBackgrounds(){return this.fetch("/items/backgrounds",u)},async getLoadingScreens(){return this.fetch("/items/loadingScreens",p)},async getRoleIcons(){return this.fetch("/items/roleIcons",[])},async getRankedSeason(){let e=await this.fetch("/ranked/season",null);return e?{...e.season||e,rewards:e.seasonAwards||[]}:null},async getRankedLeaderboard(){let e=await this.fetch("/ranked/leaderboard",[]);return Array.isArray(e)?e:e.ranksTop||e.players||e.leaderboard||[]},async getHighscores(){let e=await this.fetch("/players/highscores",[]);return Array.isArray(e)?e:e.allTime||e.players||[]},async getPlayerProfile(e){return this.fetch("/players/".concat(e),null)},async searchPlayer(e){try{return await this.fetch("/players/search?username=".concat(encodeURIComponent(e)),null,{allowedStatuses:[404]})}catch(e){return console.error("Search failed:",e),null}},async getClanQuests(){return this.fetch("/clans/quests/all",g)},async searchClans(e){let t=new URLSearchParams;return"string"==typeof e?t.append("name",e):(e.name&&t.append("name",e.name),e.minLevel&&t.append("minLevel",e.minLevel.toString()),e.language&&t.append("language",e.language),e.joinType&&t.append("joinType",e.joinType),e.sortBy&&t.append("sortBy",e.sortBy),e.notFull&&t.append("notFull","true")),this.fetch("/clans/search?".concat(t.toString()),[])},extractItems(e){if(console.log("[WovEngine] Extracting items from ".concat((null==e?void 0:e.length)||0," sets")),!e||!Array.isArray(e))return console.warn("[WovEngine] Invalid sets data:",e),[];e.length>0&&console.log("[WovDebug] First set received:",e[0]);let t=[],r=new Set;return e.forEach(e=>{e.items&&Array.isArray(e.items)?e.items.forEach(a=>{r.has(a.id)||(r.add(a.id),t.push(y({...a,imageUrl:this.resolveImageUrl(a.id,"avatar",a.imageUrl),name:a.name||"".concat(e.name||"Unknown Set"," Item")})))}):e.avatarItemIds&&Array.isArray(e.avatarItemIds)&&e.avatarItemIds.forEach(e=>{if(!r.has(e)){r.add(e);let a=v[e]&&v[e].category||null;t.push(y({id:e,name:"Item ".concat(e.substring(0,5),"..."),type:a||"SHIRT",rarity:"COMMON",imageUrl:this.resolveImageUrl(e,"avatar",void 0,a||void 0)}))}})}),console.log("[WovEngine] Extracted ".concat(t.length," unique items")),t},resolveImageUrl:(e,t,r,a)=>r&&!r.includes("dicebear")?r:h[e]?h[e].cdnUrl:b(e,t),async generateSharedAvatarUrl(e){if(!w)return null;try{let t={items:e.map(e=>({id:e,prio:0})),skinColorId:"default"},r=await fetch("".concat(j,"/avatars/sharedAvatar"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bot ".concat(w)},body:JSON.stringify(t)});if(!r.ok)return null;return(await r.json()).url}catch(e){return console.error("Failed to generate avatar URL",e),null}}},S={},I=(0,l.createContext)(void 0);function C(e){return e.map(e=>{let t=y(e);return t.imageUrl=k.resolveImageUrl(t.id,"avatar",t.imageUrl,t.type),t})}function E(e){let{children:t}=e,[r,s]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[n,d]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),[u,p]=(0,l.useState)([]),[g,h]=(0,l.useState)([]),[b,f]=(0,l.useState)([]),[v,y]=(0,l.useState)(null),[j,w]=(0,l.useState)([]),[N,A]=(0,l.useState)([]),[E,O]=(0,l.useState)(!0),[_,R]=(0,l.useState)(null),[L,z]=(0,l.useState)({}),[T,M]=(0,l.useState)(S),[D,P]=(0,l.useState)(1),[U,B]=(0,l.useState)(""),[G,W]=(0,l.useState)("ALL"),[F,H]=(0,l.useState)(4),[Y,K]=(0,l.useState)("DEFAULT");(0,l.useEffect)(()=>{let e=!1;return async function(){try{let t;O(!0),R(null);let[r,a,l,i,n,c,m,u,g,b,v]=await Promise.all([k.getRoles(),k.getAvatarItems(),k.getAvatarSets(),k.getBundles(),k.getBackgrounds(),k.getShopActiveOffers(),k.getCalendars(),k.getRoleIcons(),k.getRankedSeason(),k.getRankedLeaderboard(),k.getHighscores()]);if(e)return;console.log("[WovContext] Roles received: ".concat(Array.isArray(r)?r.length:"Not Array")),console.log("[WovContext] Bundles received type: ".concat(typeof i,", isArray: ").concat(Array.isArray(i))),i&&Array.isArray(i)&&i.length>0?console.log("[WovContext] \uD83D\uDD0D RAW API BUNDLE (First):",i[0]):i&&console.log("[WovContext] \uD83D\uDD0D RAW API BUNDLE (Object?):",i),console.log("[WovContext] Offers received: ".concat(Array.isArray(c)?c.length:"Not Array")),c&&c.length>0&&console.log("[WovContext] \uD83D\uDD0D RAW OFFER (First):",c[0]),console.log("[WovContext] Calendars received: ".concat(Array.isArray(m)?m.length:"Not Array")),m&&m.length>0&&console.log("[WovContext] \uD83D\uDD0D RAW CALENDAR (First):",m[0]),console.log("[WovContext] Role Icons received: ".concat(Array.isArray(u)?u.length:"Not Array")),f(Array.isArray(u)?u:[]),console.log("[WovContext] Season:",g?"Loaded":"Null"),console.log("[WovContext] Leaderboard:",Array.isArray(b)?b.length:"Invalid"),console.log("[WovContext] Highscores:",Array.isArray(v)?v.length:"Invalid"),y(g),w(Array.isArray(b)?b:[]),A(Array.isArray(v)?v:[]),s(Array.isArray(r)?r:[]);let j=Array.isArray(c)?Array.from(new Map(c.map((e,t)=>{let r=e.id||"generated-offer-".concat(t,"-").concat(Math.random().toString(36).substr(2,9)),a={...e,id:r};return[r,a]})).values()):[];p(j),h(Array.isArray(m)?m:[]);let N=[];Array.isArray(c)&&c.forEach(e=>{e.avatarItemSets&&Array.isArray(e.avatarItemSets)&&N.push(...e.avatarItemSets)});let S=[...Array.isArray(l)?l:[],...Array.isArray(i)?i:[],...N],I=Array.from(new Map(S.map(e=>[e.id,e])).values());d(I),x(Array.isArray(n)?n:[]);let E=a?Array.isArray(a)?a:"object"==typeof a&&"items"in a&&Array.isArray(a.items)?a.items:[]:[];if(E.length>0?console.log("[WovContext] \uD83D\uDD0D RAW API ITEM (First):",E[0]):I.length>0&&console.log("[WovContext] \uD83D\uDD0D RAW API SET (First):",I[0]),E.length>0)console.log("[WovContext] ✅ Direct items: ".concat(E.length)),t=C(E);else{console.log("[WovContext] ⚠️  Direct items empty – falling back to sets extraction");let e=function(e){if(!Array.isArray(e)||0===e.length)return[];let t=new Map;return e.forEach(e=>{let r=Array.isArray(e.items)?e.items:[],a=Array.isArray(e.avatarItemIds)?e.avatarItemIds:[];r.forEach(e=>{!(null==e?void 0:e.id)||t.has(e.id)||t.set(e.id,e)}),a.forEach(r=>{!r||t.has(r)||t.set(r,{id:r,name:e.name?"".concat(e.name," – ").concat(r.slice(0,8)):r,type:"SHIRT",rarity:"COMMON",imageUrl:""})})}),Array.from(t.values())}(I);console.log("[WovContext] ✅ Items from sets: ".concat(e.length)),t=C(e)}console.log("[WovContext] \uD83C\uDFAF Total items ready for grid: ".concat(t.length));let _=t.filter(e=>"SKIN"!==e.type);o(_)}catch(t){if(!e){let e=t instanceof Error?t.message:String(t);console.error("[WovContext] Init failed:",e),R(e)}}finally{e||O(!1)}}(),()=>{e=!0}},[]),(0,l.useEffect)(()=>{try{let e=localStorage.getItem("wov_wardrobe");e&&z(JSON.parse(e))}catch(e){}},[]),(0,l.useEffect)(()=>{try{localStorage.setItem("wov_wardrobe",JSON.stringify(L))}catch(e){}},[L]),(0,l.useEffect)(()=>{try{let e=localStorage.getItem("wov_calibration");e&&M(JSON.parse(e))}catch(e){}},[]),(0,l.useEffect)(()=>{try{localStorage.setItem("wov_calibration",JSON.stringify(T))}catch(e){}},[T]);let q=(0,l.useCallback)((e,t,r)=>{M(a=>{let s=a[e]||{},l=s[t]||{...c};return{...a,[e]:{...s,[t]:{...l,...r}}}})},[]),V=(0,l.useCallback)(e=>{M(t=>{let r={...t};return Object.keys(e).forEach(t=>{let a=e[t];a&&(r[t]={...r[t]||{}},Object.keys(a).forEach(e=>{let s=a[e];s&&(r[t][e]={...r[t][e]||c,...s})}))}),r})},[]),X=(0,l.useCallback)(()=>{M(S),localStorage.removeItem("wov_calibration")},[]),J=(0,l.useCallback)(e=>{z(t=>({...t,[e.type]:e}))},[]),Q=(0,l.useCallback)(e=>{z(t=>{let r={};t.SKIN&&(r.SKIN=t.SKIN),t.EYES&&(r.EYES=t.EYES),t.MOUTH&&(r.MOUTH=t.MOUTH);let a=e=>i.find(t=>t.id===e);return e.items&&Array.isArray(e.items)&&e.items.forEach(e=>{let t=a(e.id);t||(t=C([e])[0]),t&&t.type&&"SET"!==t.type&&(r[t.type]=t)}),e.avatarItemIds&&Array.isArray(e.avatarItemIds)&&e.avatarItemIds.forEach(e=>{let t=a(e);t?r[t.type]=t:console.warn("[WovContext] Item ID ".concat(e," from set not found in global items."))}),r})},[i]),$=(0,l.useCallback)(e=>{z(t=>{let r={...t};return delete r[e],r})},[]),Z=(0,l.useCallback)(()=>z({}),[]),ee=(0,l.useCallback)(e=>Object.values(L).some(t=>t.id===e),[L]);return(0,a.jsx)(I.Provider,{value:{roles:r,items:i,sets:n,backgrounds:m,activeOffers:u,calendars:g,roleIcons:b,rankedSeason:v,leaderboard:j,highscores:N,loading:E,error:_,equippedItems:L,equipItem:J,equipSet:Q,unequipItem:$,clearWardrobe:Z,isEquipped:ee,calibrationMap:T,updateCalibration:q,batchUpdateCalibration:V,resetCalibration:X,avatarScale:D,setAvatarScale:P,searchTerm:U,setSearchTerm:B,selectedRarity:G,setSelectedRarity:W,gridColumns:F,setGridColumns:H,sortBy:Y,setSortBy:K},children:t})}function O(){let e=(0,l.useContext)(I);if(!e)throw Error("useWolvesville must be used within WolvesvilleProvider");return e}var _=r(858),R=r(5059),L=r(1466),z=r(7078),T=r(7819),M=r(2823),D=r(3467),P=r(767),U=r(6710);let B=[{id:"dashboard",label:"Dashboard",icon:_.A},{id:"wardrobe",label:"Guardaroba & Item",icon:R.A},{id:"roles",label:"Ruoli",icon:L.A},{id:"roleIcons",label:"Icone Ruolo",icon:z.A},{id:"profiles",label:"Cerca Giocatore",icon:L.A},{id:"ranked",label:"Ranked & Classifiche",icon:T.A},{id:"clans",label:"Clan & Quest",icon:M.A},{id:"wiki",label:"Wiki",icon:D.A}];function G(e){let{activeTab:t,onTabChange:r}=e,[i,o]=(0,l.useState)(!1),n=e=>{r(e),o(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>o(!i),className:"md:hidden fixed top-20 left-4 z-50 bg-primary text-primary-foreground p-2.5 rounded-lg shadow-lg hover:bg-primary/90 transition-colors tap-target","aria-label":"Toggle menu",children:i?(0,a.jsx)(P.A,{size:20}):(0,a.jsx)(U.A,{size:20})}),i&&(0,a.jsx)("div",{className:"md:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-40",onClick:()=>o(!1)}),(0,a.jsxs)("div",{className:(0,s.cn)("fixed md:static top-0 left-0 h-screen md:h-auto w-64 shrink-0 flex flex-col gap-2 bg-background border-r border-border/50 z-40 transition-transform duration-300 ease-in-out overflow-y-auto",i?"translate-x-0":"-translate-x-full md:translate-x-0"),children:[(0,a.jsxs)("div",{className:"p-4 mb-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-serif gold-text tracking-tight",children:"Wolvesville DB"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-widest opacity-70",children:"Unofficial Tool"})]}),(0,a.jsx)("nav",{className:"flex flex-col gap-1 px-2",children:B.map(e=>{let r=t===e.id,l=e.icon;return(0,a.jsxs)("button",{onClick:()=>n(e.id),className:(0,s.cn)("flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 tap-target",r?"bg-primary/10 text-primary shadow-[0_0_15px_rgba(234,179,8,0.1)] border border-primary/20":"text-muted-foreground hover:bg-card/50 hover:text-foreground"),children:[(0,a.jsx)(l,{size:18,className:r?"text-primary":"opacity-70"}),(0,a.jsx)("span",{children:e.label}),r&&(0,a.jsx)("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-primary shadow-[0_0_5px_currentColor]"})]},e.id)})}),(0,a.jsx)("div",{className:"mt-auto p-4 opacity-50 text-[10px] text-center",children:"v3.4.1 Dev by R0ck"})]})]})}var W=r(5686),F=r(4505),H=r(7965),Y=r(2792),K=r(836),q=r(1757),V=r(6527),X=r(3473),J=r(1556),Q=r(7780),$=r(5565);let Z=[{id:"skin-1",color:"#F5D0B0",bodySrc:"https://cdn2.wolvesville.com/bodyPaints/body-skin-1.avatar-large@3x.png",headSrc:"https://cdn2.wolvesville.com/bodyPaints/head-skin-1.avatar-large@3x.png"},{id:"skin-2",color:"#E0AC69",bodySrc:"https://cdn2.wolvesville.com/bodyPaints/body-skin-2.avatar-large@3x.png",headSrc:"https://cdn2.wolvesville.com/bodyPaints/head-skin-2.avatar-large@3x.png"},{id:"skin-3",color:"#C68642",bodySrc:"https://cdn2.wolvesville.com/bodyPaints/body-skin-3.avatar-large@3x.png",headSrc:"https://cdn2.wolvesville.com/bodyPaints/head-skin-3.avatar-large@3x.png"},{id:"skin-4",color:"#8D5524",bodySrc:"https://cdn2.wolvesville.com/bodyPaints/body-skin-4.avatar-large@3x.png",headSrc:"https://cdn2.wolvesville.com/bodyPaints/head-skin-4.avatar-large@3x.png"},{id:"skin-5",color:"#5D3A1A",bodySrc:"https://cdn2.wolvesville.com/bodyPaints/body-skin-5.avatar-large@3x.png",headSrc:"https://cdn2.wolvesville.com/bodyPaints/head-skin-5.avatar-large@3x.png"},{id:"skin-6",color:"#2B1B12",bodySrc:"https://cdn2.wolvesville.com/bodyPaints/body-skin-6.avatar-large@3x.png",headSrc:"https://cdn2.wolvesville.com/bodyPaints/head-skin-6.avatar-large@3x.png"}],ee=[{id:"div-back-item",zIndex:5,offsetKey:"back",category:"BACK"},{id:"div-gravestone",zIndex:6,offsetKey:"gravestone",category:"GRAVESTONE"},{id:"div-body-skin",zIndex:10,offsetKey:"body-skin",isMannequin:"BODY"},{id:"div-shirt",zIndex:20,offsetKey:"shirt",category:"SHIRT"},{id:"div-head-skin",zIndex:30,offsetKey:"head-skin",isMannequin:"HEAD"},{id:"div-beard",zIndex:35,offsetKey:"beard",category:"BEARD"},{id:"div-mouth",zIndex:40,offsetKey:"mouth",category:"MOUTH"},{id:"div-eyes",zIndex:50,offsetKey:"eyes",category:"EYES"},{id:"div-mask",zIndex:70,offsetKey:"mask",category:"MASK"},{id:"div-glasses",zIndex:80,offsetKey:"glasses",category:"GLASSES"},{id:"div-hair",zIndex:85,offsetKey:"hair",category:"HAIR"},{id:"div-hat",zIndex:90,offsetKey:"hat",category:"HAT"},{id:"div-front-item",zIndex:100,offsetKey:"front",category:"FRONT"},{id:"div-emoji",zIndex:110,offsetKey:"emoji",category:"EMOJI"}];function et(e){if(!e)return"";if(!e.includes("wolvesville.com"))return e;let t=e;return t.includes(".store")&&(t=t.replace(".store",".avatar-large")),t.includes("@")?t.includes("@3x"):t=t.replace(".png","@2x.png"),t.includes(".avatar-large")&&!t.includes("@")&&(t=t.replace(".png","@2x.png")),t}function er(e){let{className:t,skinId:r=Z[0].id,showMannequin:s=!0,exportMode:l=!1,exportLayout:i="raw",backgroundColor:o,showGradient:n=!0}=e,{equippedItems:d}=O(),c=Z.find(e=>e.id===r)||Z[0],m=!l||"scene"===i,x=l&&"raw"===i?"relative overflow-hidden flex items-center justify-center ".concat(t):"relative w-full h-full bg-[#1a1a1a] rounded-xl overflow-hidden shadow-2xl border-4 border-[#2a2a2a] flex items-end justify-center pb-3.5 ".concat(t),u=l&&"raw"===i?{width:"".concat(209,"px"),height:"".concat(471,"px")}:{};return o&&(u.backgroundColor=o),(0,a.jsxs)("div",{className:x,style:u,children:[m&&!1!==n&&!o&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0f172a] to-[#1e293b] opacity-50"}),(0,a.jsx)("div",{style:{width:"".concat(209,"px"),height:"".concat(314,"px"),position:"relative",flexShrink:0,transform:m?"scale(0.45)":"none",transformOrigin:"bottom center"},children:(0,a.jsx)("div",{className:"w-full h-full absolute top-0 left-0",style:{transform:m?"translateY(25px)":"none"},children:ee.map(e=>{let t=null;if(e.isMannequin)"BODY"===e.isMannequin?d.SKIN?(t=et(d.SKIN.imageUrl),d.SKIN.id):s&&(t=c.bodySrc||null):"HEAD"===e.isMannequin&&s&&(t=c.headSrc||null);else if(e.category){let r=d[e.category];r&&(t=et(r.imageUrl),r.id)}let r=function(e,t){if(!t)return{};let r=1;return t.includes("@3x")?r=1/3:t.includes("@2x")&&(r=.5),{display:"block",position:"absolute",bottom:0,left:"50%",width:"auto",height:"auto",maxWidth:"none",maxHeight:"none",transform:"translateX(-50%) scale(".concat(r,")"),transformOrigin:"bottom center",pointerEvents:"none"}}(0,t||void 0);return(0,a.jsx)("div",{id:e.id,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:e.zIndex,pointerEvents:"none"},children:t?(0,a.jsx)("img",{src:t,alt:e.category||e.id,width:"auto",height:"auto",style:{...r,maxWidth:"none",maxHeight:"none",objectFit:"none"}}):null},e.id)})})})]})}var ea=r(8683);let es={HAT:{x:0,y:-400,align:"bottom_to_top"},HAIR:{x:0,y:-300,align:"center_to_center"},GLASSES:{x:0,y:-150,align:"center_to_center"},EYES:{x:0,y:-150,align:"center_to_center"},MOUTH:{x:0,y:50,align:"center_to_center"},MASK:{x:0,y:50,align:"center_to_center"},BEARD:{x:0,y:50,align:"center_to_center"},SHIRT:{x:0,y:200,align:"center_to_center"},BODY:{x:0,y:0,align:"center_to_center"}};async function el(e){return new Promise((t,r)=>{let a=new Image;a.crossOrigin="Anonymous",a.src=e,a.onerror=()=>{console.warn("Auto-calibration: Failed to load image (CORS or network error)",e),t(null)},a.onload=()=>{let e=document.createElement("canvas");e.width=a.width,e.height=a.height;let s=e.getContext("2d");if(!s){r("Canvas context not available");return}s.drawImage(a,0,0);let l=s.getImageData(0,0,e.width,e.height).data,i=e.width,o=0,n=e.height,d=0,c=!1;for(let t=0;t<e.height;t++)for(let r=0;r<e.width;r++)l[(t*e.width+r)*4+3]>10&&(r<i&&(i=r),r>o&&(o=r),t<n&&(n=t),t>d&&(d=t),c=!0);if(!c){t(null);return}t({minX:i,maxX:o,minY:n,maxY:d,width:o-i,height:d-n,centerX:i+(o-i)/2,centerY:n+(d-n)/2,originalWidth:e.width,originalHeight:e.height})},a.onerror=r=>{console.error("Errore caricamento immagine per analisi:",e,r),t(null)}})}var ei=r(1620);let eo=["HAT","HAIR","GLASSES","EYES","MOUTH","MASK","BEARD","SHIRT","BACK","FRONT","GRAVESTONE","EMOJI","BODY","HEAD"];function en(){var e;let{equippedItems:t,unequipItem:r,clearWardrobe:i,calibrationMap:o,updateCalibration:n,resetCalibration:d,batchUpdateCalibration:m,items:x,equipItem:u}=O(),[p,g]=(0,l.useState)(!1),[h,b]=(0,l.useState)(Z[0].id),[f,v]=(0,l.useState)(!0);(0,l.useRef)(null);let[y,j]=(0,l.useState)(!1),[w,N]=(0,l.useState)("#1a1a1a"),A=async()=>{let e=document.querySelector(".avatar-canvas-container");if(!e){alert("Impossibile trovare l'elemento da catturare");return}g(!0);let t=new Map;try{let r=e.querySelectorAll("img");console.log("[Download] Processing ".concat(r.length," images..."));let a=Array.from(r).map(async e=>{let r=e.src;if(!(r.startsWith("data:")||r.startsWith("blob:")||r.startsWith("/")))try{let a="https://wsrv.nl/?url=".concat(encodeURIComponent(r),"&output=png"),s=await fetch(a);if(!s.ok)throw Error("Proxy fetch failed");let l=await s.blob(),i=await new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>e(r.result),r.onerror=t,r.readAsDataURL(l)});t.set(e,r),e.removeAttribute("crossorigin"),e.src=i}catch(e){console.warn("[Download] Failed to load image via proxy: ".concat(r),e)}});await Promise.all(a),await new Promise(e=>setTimeout(e,500));let s=await (0,ei.$E)(e,{cacheBust:!0,pixelRatio:2,skipFonts:!0,backgroundColor:void 0}),l=document.createElement("a"),i=f?"card":"avatar";l.download="wolvesville-".concat(i,"-").concat(Date.now(),".png"),l.href=s,l.click()}catch(e){console.error("Failed to capture screenshot:",e),alert("Errore durante la creazione dello screenshot. Dettagli: "+(e instanceof Error?e.message:"Unknown error"))}finally{t.forEach((e,t)=>{t.src=e}),g(!1)}},[S,I]=(0,l.useState)(!1),[C,E]=(0,l.useState)(!1),[_,R]=(0,l.useState)("HAT"),[L,z]=(0,l.useState)(!1),[T,M]=(0,l.useState)({x:20,y:100}),[D,U]=(0,l.useState)(!1),[B,G]=(0,l.useState)({x:0,y:0});(0,l.useEffect)(()=>{let e=e=>{D&&M({x:e.clientX-B.x,y:e.clientY-B.y})},t=()=>U(!1);return D&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[D,B]);let ee=async()=>{E(!0);try{let a=x.filter(e=>e.type===_);if(0===a.length){console.warn("[AutoCalib] No items found for category:",_);return}console.log("[AutoCalib] Starting analysis for ".concat(a.length," items of type ").concat(_));let l={},i=0;for(let n of a)if(n.imageUrl){try{let a=await el(n.imageUrl);if(a){var e,t,r;let d=(0,s.N)(n.imageUrl),c=function(e,t,r,a){let s=es[e];if(!s)return{x:0,y:0};let l=0,i=0,o=a/2,n=t.centerX-r/2,d=t.centerY-o;if("center_to_center"===s.align)l=s.x-n,i=s.y-d;else if("bottom_to_top"===s.align){let e=t.maxY-o;l=s.x-n,i=s.y-e}return{x:l/r*1e3,y:i/a*1e3}}(_,a,a.originalWidth,a.originalHeight);l[_]||(l[_]={});let m=null!==(r=null===(t=o[_])||void 0===t?void 0:null===(e=t[d])||void 0===e?void 0:e.scale)&&void 0!==r?r:1;l[_][d]={x:Number(c.x.toFixed(1)),y:Number(c.y.toFixed(1)),scale:m},i++}}catch(e){console.error("[AutoCalib] Failed for item ".concat(n.id,":"),e)}i%10==0&&await new Promise(e=>setTimeout(e,0))}console.log("[AutoCalib] Processed ".concat(i," items.")),i>0?(m(l),console.log("AUTO CALIBRATION RESULT JSON:",JSON.stringify(l,null,2)),alert("Calibrazione automatica completata per ".concat(i," item! Controlla la console per il JSON."))):alert("Nessun item analizzato con successo.")}catch(e){console.error("[AutoCalib] Error:",e),alert("Errore durante la calibrazione automatica.")}finally{E(!1)}},et=0===Object.keys(t).length,en=t[_],ed=en?(0,s.N)(en.imageUrl):"@1",ec=(null===(e=o[_])||void 0===e?void 0:e[ed])||c,em="BODY"===_||"HEAD"===_;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"sticky top-4 md:top-24 bg-card/80 backdrop-blur-xl border border-border/60 rounded-2xl shadow-2xl p-4 md:p-6 flex flex-col items-center gap-4 md:gap-6 w-full",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-xl md:text-2xl font-bold font-serif gold-text mb-1",children:"Avatar Builder"}),(0,a.jsx)("p",{className:"text-[10px] md:text-xs text-muted-foreground",children:"Crea il tuo stile unico"})]}),(0,a.jsx)("div",{className:"avatar-canvas-container relative inline-block shadow-2xl rounded-xl overflow-hidden w-[480px] h-[380px] md:w-[370px] md:h-[370px]",children:(0,a.jsx)(er,{skinId:h,showMannequin:!0,exportMode:f,exportLayout:f?"scene":"raw",className:f?"bg-[#1a1a1a]":void 0,backgroundColor:w,showGradient:!w})}),(0,a.jsx)("div",{className:"w-full flex justify-center -mt-2",children:(0,a.jsx)("button",{onClick:()=>j(e=>!e),className:"px-3 py-1.5 text-[10px] md:text-xs font-bold rounded-full border transition-all tap-target ".concat(y?"bg-black/30 border-white/15 text-white/80 hover:bg-black/40":"bg-primary/20 border-primary/40 text-primary hover:bg-primary/30"),title:y?"Nascondi":"Vedi tutto",children:y?"Nascondi":"Vedi tutto"})}),y&&(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-3 bg-black/20 border border-white/10 px-2 md:px-3 py-1.5 md:py-2 rounded-lg",children:[(0,a.jsx)("span",{className:"text-[10px] md:text-xs text-muted-foreground font-bold uppercase tracking-wider",children:"Colore sfondo"}),(0,a.jsx)("input",{type:"color",value:w,onChange:e=>N(e.target.value),className:"w-7 h-5 md:w-8 md:h-6 p-0 border border-white/20 rounded cursor-pointer bg-transparent",title:"Scegli colore di sfondo"}),(0,a.jsx)("button",{onClick:()=>N("#1a1a1a"),className:"text-[9px] md:text-[10px] px-1.5 md:px-2 py-0.5 md:py-1 rounded border border-white/10 hover:bg-white/10 tap-target",title:"Reset",children:"Reset"})]}),y&&(0,a.jsx)("div",{className:"flex gap-1.5 md:gap-2 justify-center py-1.5 md:py-2 bg-black/20 px-3 md:px-4 rounded-full border border-white/5",children:Z.map(e=>(0,a.jsx)("button",{onClick:()=>b(e.id),className:"w-5 h-5 md:w-6 md:h-6 rounded-full border-2 transition-all hover:scale-110 tap-target ".concat(h===e.id?"border-white scale-110 shadow-[0_0_10px_rgba(255,255,255,0.3)]":"border-transparent opacity-80"),style:{backgroundColor:e.color},title:e.id},e.id))}),y&&!et&&(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("h4",{className:"text-[10px] md:text-xs font-bold text-muted-foreground uppercase tracking-wider mb-2 md:mb-3",children:["Equipaggiati (",Object.keys(t).length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-5 gap-1.5 md:gap-2 max-h-32 md:max-h-40 overflow-y-auto pr-1 custom-scrollbar",children:Object.entries(t).map(e=>{let[t,s]=e;if("SKIN"===t)return null;let l=S&&_===t;return(0,a.jsxs)("div",{className:"relative aspect-square bg-black/40 rounded-lg border p-1 group cursor-pointer transition-all tap-target ".concat(l?"border-yellow-500 shadow-[0_0_10px_rgba(234,179,8,0.3)]":"border-white/10 hover:border-primary/50"),onClick:()=>{S?R(t):r(t)},title:S?"Seleziona ".concat(t," per calibrazione"):"Rimuovi ".concat(s.name," (").concat(t,")"),children:[(0,a.jsx)($.default,{src:k.resolveImageUrl(s.id,"avatar",s.imageUrl),alt:t,fill:!0,className:"object-contain p-0.5 md:p-1",unoptimized:!0}),!S&&(0,a.jsx)("div",{className:"absolute inset-0 bg-red-500/80 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-all rounded-lg backdrop-blur-sm",children:(0,a.jsx)(W.A,{size:12,className:"md:w-3.5 md:h-3.5 text-white"})})]},t)})})]}),y&&(0,a.jsxs)("div",{className:"flex gap-2 md:gap-3 w-full mt-auto pt-3 md:pt-4 border-t border-white/5",children:[(0,a.jsx)("button",{onClick:i,className:"flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2.5 md:py-3 rounded-xl bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-xs md:text-sm font-bold border border-red-500/20 tap-target",title:"Svuota guardaroba",children:(0,a.jsx)(W.A,{size:14,className:"md:w-4 md:h-4"})}),(0,a.jsxs)("button",{onClick:A,disabled:et||p,className:"flex-1 flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2.5 md:py-3 rounded-xl bg-blue-600 text-white hover:bg-blue-500 hover:scale-[1.02] active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all text-xs md:text-sm font-bold shadow-lg shadow-blue-500/20 tap-target",title:"Scarica Card",children:[p?(0,a.jsx)(F.A,{size:14,className:"md:w-4 md:h-4 animate-spin"}):(0,a.jsx)(H.A,{size:14,className:"md:w-4 md:h-4"}),(0,a.jsx)("span",{children:"Card"})]})]})]}),!L&&(0,a.jsx)("button",{onClick:()=>z(!0),className:"hidden md:block fixed bottom-4 right-4 bg-yellow-500 text-black p-3 rounded-full shadow-lg hover:scale-110 transition-transform z-[9999]",title:"Open Calibration Admin",children:(0,a.jsx)(Y.A,{size:24})}),L&&(0,a.jsxs)("div",{className:"hidden md:block fixed bg-black/90 backdrop-blur-lg border border-yellow-500/50 rounded-xl shadow-2xl z-[9999] text-xs font-mono w-80 flex flex-col",style:{left:T.x,top:T.y},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-yellow-500/30 cursor-grab active:cursor-grabbing bg-yellow-500/10 rounded-t-xl",onMouseDown:e=>{U(!0),G({x:e.clientX-T.x,y:e.clientY-T.y})},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-yellow-400 font-bold select-none",children:[(0,a.jsx)(K.A,{size:16}),(0,a.jsx)("span",{children:"CALIBRAZIONE V2"})]}),(0,a.jsx)("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)(P.A,{size:16})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto custom-scrollbar",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white/5 p-2 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-300 font-bold",children:"Modalit\xe0 Admin"}),(0,a.jsx)("button",{onClick:()=>I(!S),className:"w-12 h-6 rounded-full transition-colors relative ".concat(S?"bg-green-500":"bg-gray-600"),children:(0,a.jsx)("div",{className:"absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ".concat(S?"left-7":"left-1")})})]}),S&&(0,a.jsxs)("div",{className:"flex gap-2 p-2 bg-white/5 rounded-lg",children:[["BODY","HEAD"].map(e=>(0,a.jsx)("button",{onClick:()=>R(e),className:"flex-1 py-1.5 px-3 rounded text-[10px] font-bold transition-all ".concat(_===e?"bg-yellow-500 text-black shadow-lg shadow-yellow-500/20":"bg-black/40 text-gray-400 hover:bg-black/60 hover:text-white"),children:e},e)),(0,a.jsxs)("div",{className:"pt-2 border-t border-white/10",children:[(0,a.jsxs)("button",{onClick:ee,disabled:C,className:"w-full py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 rounded text-white font-bold text-xs flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[C?(0,a.jsx)(F.A,{size:14,className:"animate-spin"}):(0,a.jsx)(q.A,{size:14}),C?"Analisi in corso...":"Auto-Calibra Visibili (".concat(_,")")]}),(0,a.jsxs)("p",{className:"text-[9px] text-gray-500 mt-1 text-center leading-tight",children:["Analizza i pixel di tutti gli item ",_," caricati e calcola l'offset ideale."]})]})]}),S&&(0,a.jsxs)("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2",children:[(0,a.jsxs)("div",{className:"bg-yellow-500/10 p-3 rounded border border-yellow-500/20 text-yellow-200",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(Y.A,{size:14})," Strumenti Calibrazione"]}),(0,a.jsx)("p",{className:"text-[10px] opacity-80",children:"Usa gli slider o i pulsanti +/- per calibrare posizione e dimensione. Precisione 0.1."})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-gray-400",children:"Categoria Selezionata"}),(0,a.jsx)("select",{value:_,onChange:e=>R(e.target.value),className:"w-full bg-black border border-white/20 rounded p-1 text-white",children:eo.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"bg-white/5 p-3 rounded space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-white/10 pb-2",children:[(0,a.jsx)("span",{className:"font-bold text-white",children:_}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold ".concat("@1"===ed?"bg-gray-500 text-white":"@2"===ed?"bg-green-500 text-black":"@3"===ed?"bg-blue-500 text-white":"bg-purple-500 text-white"),children:ed})]}),en||em?(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,a.jsxs)("div",{className:"bg-black/40 p-1 rounded",children:[(0,a.jsx)("div",{className:"text-gray-500 text-[10px]",children:"X"}),(0,a.jsx)("div",{className:"text-white font-mono",children:ec.x.toFixed(1)})]}),(0,a.jsxs)("div",{className:"bg-black/40 p-1 rounded",children:[(0,a.jsx)("div",{className:"text-gray-500 text-[10px]",children:"Y"}),(0,a.jsx)("div",{className:"text-white font-mono",children:ec.y.toFixed(1)})]}),(0,a.jsxs)("div",{className:"bg-black/40 p-1 rounded",children:[(0,a.jsx)("div",{className:"text-gray-500 text-[10px]",children:"Scale"}),(0,a.jsx)("div",{className:"text-white font-mono",children:ec.scale.toFixed(2)})]})]}):(0,a.jsx)("p",{className:"text-red-400 italic text-center",children:"Nessun item equipaggiato"})]}),(en||em)&&(0,a.jsxs)("div",{className:"space-y-4 bg-white/5 p-3 rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"flex justify-between text-[10px] text-gray-400",children:(0,a.jsx)("span",{children:"X Position"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>n(_,ed,{x:Number((ec.x-.1).toFixed(1))}),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded transition-colors",children:(0,a.jsx)(V.A,{size:12})}),(0,a.jsx)(ea.A,{value:[ec.x],min:-1e3,max:1e3,step:.1,onValueChange:e=>n(_,ed,{x:e[0]}),className:"flex-1"}),(0,a.jsx)("button",{onClick:()=>n(_,ed,{x:Number((ec.x+.1).toFixed(1))}),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded transition-colors",children:(0,a.jsx)(X.A,{size:12})})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"flex justify-between text-[10px] text-gray-400",children:(0,a.jsx)("span",{children:"Y Position"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>n(_,ed,{y:Number((ec.y-.1).toFixed(1))}),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded transition-colors",children:(0,a.jsx)(V.A,{size:12})}),(0,a.jsx)(ea.A,{value:[ec.y],min:-1e4,max:1e4,step:.1,onValueChange:e=>n(_,ed,{y:e[0]}),className:"flex-1"}),(0,a.jsx)("button",{onClick:()=>n(_,ed,{y:Number((ec.y+.1).toFixed(1))}),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded transition-colors",children:(0,a.jsx)(X.A,{size:12})})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"flex justify-between text-[10px] text-gray-400",children:(0,a.jsx)("span",{children:"Scale"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>n(_,ed,{scale:Number((ec.scale-.01).toFixed(2))}),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded transition-colors",children:(0,a.jsx)(V.A,{size:12})}),(0,a.jsx)(ea.A,{value:[ec.scale],min:.1,max:5,step:.01,onValueChange:e=>n(_,ed,{scale:e[0]}),className:"flex-1"}),(0,a.jsx)("button",{onClick:()=>n(_,ed,{scale:Number((ec.scale+.01).toFixed(2))}),className:"p-1.5 bg-white/10 hover:bg-white/20 rounded transition-colors",children:(0,a.jsx)(X.A,{size:12})})]})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-white/10 flex gap-2",children:[(0,a.jsxs)("button",{onClick:d,className:"flex-1 bg-red-500/20 hover:bg-red-500/40 text-red-300 py-2 rounded flex items-center justify-center gap-2",children:[(0,a.jsx)(J.A,{size:14})," Reset"]}),(0,a.jsxs)("button",{className:"flex-1 bg-blue-500/20 hover:bg-blue-500/40 text-blue-300 py-2 rounded flex items-center justify-center gap-2",onClick:()=>{let e=JSON.stringify(o,null,2);navigator.clipboard.writeText(e),alert("Configurazione copiata negli appunti!")},children:[(0,a.jsx)(Q.A,{size:14})," Export"]})]})]})]})]})}var ed=r(8867),ec=r(8236),em=r(196),ex=r(853),eu=r(6967);let ep=["ALL","SET","HAIR","HAT","EYES","MOUTH","GLASSES","SHIRT","MASK","BACK","FRONT","GRAVESTONE"],eg={ALL:"\uD83D\uDDFA",SET:"\uD83C\uDF81",HAIR:"\uD83D\uDC69‍\uD83E\uDDB0",HAT:"\uD83E\uDDE2",EYES:"\uD83D\uDC40",MOUTH:"\uD83D\uDC44",GLASSES:"\uD83D\uDC53",SHIRT:"\uD83D\uDC55",MASK:"\uD83C\uDFAD",BACK:"\uD83C\uDF07",FRONT:"\uD83C\uDF06",GRAVESTONE:"☠"},eh=["ALL","COMMON","RARE","EPIC","LEGENDARY"],eb={COMMON:"border-gray-500/50 hover:border-gray-400",RARE:"border-blue-500/50 hover:border-blue-400",EPIC:"border-purple-500/50 hover:border-purple-400",LEGENDARY:"border-yellow-500/50 hover:border-yellow-400",MYTHICAL:"border-pink-500/50 hover:border-pink-400",MYTHIC:"border-pink-500/50 hover:border-pink-400"},ef={FRONT:1,SHIRT:2,HAT:3,BACK:4,MASK:5,HAIR:6,GLASSES:7,MOUTH:8,EYES:9,GRAVESTONE:10,EMOJI:11,SKIN:99,BODY:99,HEAD:99},ev=e=>{var t;let r=new Set,a=String(e.id).trim(),s=String(e.imageKey||e.iconUrl||(null===(t=e.name)||void 0===t?void 0:t.replace(/\s+/g,"-"))||a).trim();return r.add("https://cdn.wolvesville.com/avatarItems/".concat(a,".png")),r.add("https://cdn.wolvesville.com/avatarItems/".concat(a,"@2x.png")),s!==a&&r.add("https://cdn.wolvesville.com/avatarItems/".concat(s,".png")),Array.from(r)},ey=(0,l.memo)(function(e){let{item:t}=e;if(t.imageUrl&&t.imageUrl.startsWith("color:"))return(0,a.jsx)("div",{className:"w-full h-full rounded-full border border-white/20 shadow-inner",style:{backgroundColor:t.imageUrl.replace("color:","")}});let r=(0,l.useMemo)(()=>{let e=t.imageUrl&&!t.imageUrl.includes("dicebear")?[t.imageUrl]:[];return t._fallbackImage&&e.push(t._fallbackImage),[...e,...ev(t).filter(t=>!e.includes(t))]},[t]),[s,i]=(0,l.useState)(0),o=(0,l.useCallback)(()=>{i(e=>e+1)},[t.id,r,s]);return s>=r.length?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white/20 text-xs bg-white/5 rounded",children:"?"}):(0,a.jsx)($.default,{src:r[s],alt:t.name||t.id,fill:!0,loading:"lazy",className:"object-contain",sizes:"140px",onError:o,unoptimized:!0},r[s])}),ej=(0,l.memo)(function(e){let{item:t,equipped:r,onEquip:s,cellW:l}=e;return(0,a.jsx)("div",{onClick:()=>s(t),style:{width:l-8,height:202},className:["relative flex flex-col items-center rounded-lg p-2 transition-all cursor-pointer select-none group",r?"border-2 bg-primary/10 shadow-[0_0_12px_rgba(255,255,255,0.3)] ".concat(eb[t.rarity]||"border-white/50"):"border bg-black/20 hover:bg-black/30 ".concat(eb[t.rarity]||"border-white/10")].join(" "),children:(0,a.jsxs)("div",{className:"relative w-full flex-1 mb-1",children:[(0,a.jsx)(ey,{item:t}),r&&(0,a.jsx)("div",{className:"absolute top-0 right-0 bg-primary rounded-full p-0.5 z-10",children:(0,a.jsx)(ed.A,{size:9,className:"text-primary-foreground"})})]})})});function ew(e){let{items:t,isEquipped:r,equipItem:s,columns:i}=e,o=(0,l.useRef)(null),[n,d]=(0,l.useState)(0),[c,m]=(0,l.useState)(600),[x,u]=(0,l.useState)(800);(0,l.useEffect)(()=>{let e=o.current;if(!e)return;let t=new ResizeObserver(e=>{let[t]=e;m(t.contentRect.height),u(t.contentRect.width)});return t.observe(e),m(e.clientHeight),u(e.clientWidth),()=>t.disconnect()},[]);let p="number"==typeof i?Math.max(2,Math.min(i,10)):void 0,g=null!=p?p:Math.max(1,Math.floor(x/160)),h=Math.floor(x/g),b=Math.ceil(t.length/g),f=Math.max(0,Math.floor(n/210)-3),v=Math.min(b-1,Math.ceil((n+c)/210)+3),y=[];for(let e=f;e<=v;e++)y.push(e);let j=(0,l.useCallback)(e=>{d(e.currentTarget.scrollTop)},[]);return(0,a.jsx)("div",{ref:o,onScroll:j,className:"overflow-y-auto overflow-x-hidden w-full h-full",style:{position:"relative"},children:(0,a.jsx)("div",{style:{height:210*b,position:"relative"},children:y.map(e=>(0,a.jsx)("div",{style:{position:"absolute",top:210*e,left:0,right:0,height:210,display:"flex",gap:8,padding:"4px 0"},children:Array.from({length:g}).map((l,i)=>{let o=e*g+i;if(o>=t.length)return(0,a.jsx)("div",{style:{width:h-8}},i);let n=t[o];return(0,a.jsx)(ej,{item:n,equipped:r(n.id),onEquip:s,cellW:h},n.id)})},e))})})}function eN(e){let{items:t,loading:r}=e,{equipItem:s,equipSet:i,isEquipped:o,sets:n}=O(),[d,c]=(0,l.useState)(""),[m,x]=(0,l.useState)("ALL"),[u,p]=(0,l.useState)("ALL"),[g,h]=(0,l.useState)(4),[f,v]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1),[w,N]=(0,l.useState)("DEFAULT"),A=(0,l.useMemo)(()=>{let e=new Map;return t.forEach(t=>e.set(t.id,t)),e},[t]),k=(0,l.useMemo)(()=>{let e=d.trim().toLowerCase(),r=[];if(r="SET"===m?n.filter(t=>!e||!!t.name.toLowerCase().includes(e)).map(e=>{let t="";if(e.avatarItemIds&&e.avatarItemIds.length>0){let r=e.avatarItemIds.map(e=>A.get(e)).filter(e=>!!e&&!!e.imageUrl);r.length>0&&(r.sort((e,t)=>(ef[e.type]||50)-(ef[t.type]||50)),t=r[0].imageUrl)}return t||(t=e.items&&e.items.length>0&&e.items[0].imageUrl||e.avatarItemIds&&e.avatarItemIds.length>0&&b(e.avatarItemIds[0],"avatar")||e.avatarItemSets&&e.avatarItemSets.length>0&&b(e.avatarItemSets[0],"set")||""),{id:e.id,name:e.name,type:"SET",rarity:"COMMON",imageUrl:e.promoImageUrl||b(e.id,"set"),_fallbackImage:t,_originalSet:e}}):t.filter(t=>{var r;return("ALL"===m||t.type===m)&&("ALL"===u||t.rarity===u)&&(!e||!!(t.id.toLowerCase().includes(e)||(null!==(r=t.name)&&void 0!==r?r:"").toLowerCase().includes(e)))}),"LEGENDARY"===w){let e={MYTHICAL:6,MYTHIC:5,LEGENDARY:4,EPIC:3,RARE:2,COMMON:1};r.sort((t,r)=>(e[r.rarity]||0)-(e[t.rarity]||0))}return r},[t,n,d,m,u,w,A]),S=(0,l.useCallback)(e=>{if("SET"===e.type&&e._originalSet){let t=e._originalSet,r=[];t.items&&r.push(...t.items),t.avatarItemIds&&t.avatarItemIds.forEach(e=>{let t=A.get(e);t&&r.push(t)}),i({...t,items:r,avatarItemIds:[]})}else s(e)},[s,i,A]);return r?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64 text-muted-foreground gap-3",children:[(0,a.jsx)(F.A,{className:"animate-spin",size:20}),(0,a.jsx)("span",{children:"Caricamento oggetti..."})]}):(0,a.jsxs)("div",{className:"flex flex-col",style:{height:"calc(100vh - 180px)",minHeight:400},children:[(0,a.jsxs)("div",{className:"shrink-0 flex items-center gap-2 mb-2 relative z-30",children:[(0,a.jsx)("div",{className:"flex-1 overflow-x-auto pb-2 -mx-1 px-1 custom-scrollbar scrollbar-hide select-none flex gap-1.5 md:gap-2",children:ep.map(e=>(0,a.jsx)("button",{onClick:()=>x(e),className:"whitespace-nowrap px-3 md:px-4 py-1.5 md:py-2 rounded-lg text-[10px] md:text-xs font-bold transition-all border shrink-0 tap-target ".concat(m===e?"bg-primary text-primary-foreground border-primary shadow-lg shadow-primary/20 scale-105":"bg-black/20 text-muted-foreground border-white/5 hover:bg-black/40 hover:text-foreground hover:border-white/20"),children:eg[e]||e},e))}),(0,a.jsx)("button",{onClick:()=>j(!y),className:"p-2 rounded-lg border transition-all tap-target shrink-0 ".concat(y?"bg-primary text-primary-foreground border-primary shadow-lg":"bg-card/40 border-white/10 text-muted-foreground hover:bg-card/60 hover:text-foreground"),title:"Opzioni Filtri",children:(0,a.jsx)(ec.A,{size:20})}),y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-[1px] md:bg-transparent md:backdrop-blur-none",onClick:()=>j(!1)}),(0,a.jsxs)("div",{className:"absolute top-12 right-0 w-[280px] md:w-[320px] bg-black/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-2xl p-4 flex flex-col gap-4 animate-in fade-in zoom-in-95 origin-top-right z-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-white/10 pb-2 mb-1",children:[(0,a.jsxs)("span",{className:"text-sm font-bold text-white flex items-center gap-2",children:[(0,a.jsx)(em.A,{size:14,className:"text-primary"}),"Filtri & Opzioni"]}),(0,a.jsx)("button",{onClick:()=>j(!1),children:(0,a.jsx)(P.A,{size:16,className:"text-muted-foreground hover:text-white"})})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("label",{className:"text-[10px] text-muted-foreground uppercase font-bold flex justify-between",children:["Cerca",d&&(0,a.jsx)("span",{className:"text-primary text-[9px] cursor-pointer",onClick:()=>c(""),children:"RESET"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ex.A,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)("input",{value:d,onChange:e=>c(e.target.value),placeholder:"Nome oggetto...",className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 pl-9 pr-8 text-base md:text-sm focus:outline-none focus:border-primary/50 placeholder:text-muted-foreground/50 text-white",autoFocus:!0}),d&&(0,a.jsx)("button",{onClick:()=>c(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-white",children:(0,a.jsx)(P.A,{size:14})})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-[10px] text-muted-foreground uppercase font-bold",children:"Rarit\xe0"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("select",{value:u,onChange:e=>p(e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg py-2 pl-3 pr-8 text-base md:text-sm focus:outline-none focus:border-primary/50 appearance-none text-white cursor-pointer",children:eh.map(e=>(0,a.jsx)("option",{value:e,className:"bg-zinc-900 text-white",children:"ALL"===e?"Tutte le rarit\xe0":e},e))}),(0,a.jsx)(eu.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 rotate-90 text-muted-foreground pointer-events-none",size:14})]})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{className:"text-[10px] text-muted-foreground uppercase font-bold",children:"Dimensione Griglia"}),(0,a.jsxs)("span",{className:"text-[10px] font-mono bg-white/10 px-1.5 py-0.5 rounded text-white",children:[g," col"]})]}),(0,a.jsx)("input",{type:"range",min:2,max:10,step:1,value:g,onChange:e=>h(Number(e.target.value)),className:"w-full accent-primary h-1.5 bg-white/10 rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-[9px] text-muted-foreground px-1",children:[(0,a.jsx)("span",{children:"Grande"}),(0,a.jsx)("span",{children:"Piccola"})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t border-white/10",children:(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer group p-1 rounded-lg hover:bg-white/5 transition-colors",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded border flex items-center justify-center transition-colors ".concat("LEGENDARY"===w?"bg-primary border-primary":"border-white/30 bg-black/40"),children:"LEGENDARY"===w&&(0,a.jsx)(ed.A,{size:10,className:"text-black font-bold"})}),(0,a.jsx)("input",{type:"checkbox",className:"hidden",checked:"LEGENDARY"===w,onChange:()=>N(e=>"LEGENDARY"===e?"DEFAULT":"LEGENDARY")}),(0,a.jsx)("span",{className:"text-sm text-gray-300 group-hover:text-white transition-colors",children:"Mostra Leggendari prima"})]})}),(0,a.jsxs)("div",{className:"text-center text-[10px] text-muted-foreground pt-2 border-t border-white/5",children:[k.length," oggetti trovati"]})]})]})]}),0===k.length?(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center text-muted-foreground text-sm",children:"Nessun oggetto corrisponde ai filtri"}):(0,a.jsx)("div",{className:"flex-1 overflow-hidden rounded-xl border border-white/5",children:(0,a.jsx)(ew,{items:k,isEquipped:"SET"===m?()=>!1:o,equipItem:S,columns:g})})]})}var eA=r(2640);let ek={VILLAGER:"Villaggio",WEREWOLF:"Lupi",SOLO:"Solitario",RANDOM:"Casuale",VOTING:"Voto"},eS={GOOD:"Buona",EVIL:"Malvagia",UNKNOWN:"Sconosciuta",NONE:"Nessuna"};function eI(e){let{roles:t}=e,[r,s]=(0,l.useState)(""),[i,o]=(0,l.useState)("ALL"),n=Array.isArray(t)?t:Object.values(t||{}),d=n.filter(e=>!!((e.name||"").toLowerCase().includes(r.toLowerCase())||(e.team||"").toLowerCase().includes(r.toLowerCase()))&&("BASE"===i?!e.isAdvanced:"ADVANCED"!==i||e.isAdvanced));return((0,l.useEffect)(()=>{console.log("[RoleGallery] Received roles:",n.length,n[0])},[n]),0===n.length)?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-muted-foreground border border-dashed border-border rounded-xl",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Nessun ruolo ricevuto dall'API"}),(0,a.jsx)("p",{className:"text-sm",children:"Sto usando i dati di backup..."})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)("div",{className:"flex justify-center gap-2",children:["ALL","BASE","ADVANCED"].map(e=>(0,a.jsx)("button",{onClick:()=>o(e),className:"px-6 py-2 rounded-full text-sm font-bold transition-all border ".concat(i===e?"bg-primary text-primary-foreground border-primary shadow-lg scale-105":"bg-card/50 text-muted-foreground border-border hover:bg-card hover:text-foreground"),children:"ALL"===e?"Tutti":"BASE"===e?"Base":"Avanzati"},e))}),(0,a.jsxs)("div",{className:"relative max-w-md mx-auto w-full",children:[(0,a.jsx)(ex.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Cerca ruolo (es. Veggente, Villico)...",value:r,onChange:e=>s(e.target.value),className:"w-full bg-card/30 border border-border rounded-full py-3 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d.map((e,t)=>{var r;let s=ek[e.team||""]||e.team||"Sconosciuto",l=eS[e.aura||""]||e.aura;return(0,a.jsxs)("div",{className:"group bg-card/30 border border-border rounded-xl overflow-hidden hover:border-primary/50 hover:bg-card/50 transition-all duration-300 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4 border-b border-border/50 bg-black/10",children:[(0,a.jsx)("div",{className:"relative w-14 h-14 shrink-0 bg-black/20 rounded-lg p-1 border border-white/5 shadow-inner",children:(0,a.jsx)($.default,{src:k.resolveImageUrl(e.id,"role",null===(r=e.image)||void 0===r?void 0:r.url),alt:e.name||"Role Image",fill:!0,className:"object-contain drop-shadow-md group-hover:scale-110 transition-transform",unoptimized:!0})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"font-bold text-lg truncate text-foreground group-hover:text-primary transition-colors",children:e.name}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border ".concat("VILLAGER"===e.team?"bg-blue-500/10 text-blue-400 border-blue-500/20":"WEREWOLF"===e.team?"bg-red-500/10 text-red-400 border-red-500/20":"bg-purple-500/10 text-purple-400 border-purple-500/20"),children:[(0,a.jsx)(M.A,{size:10}),s]})})]})]}),(0,a.jsxs)("div",{className:"p-4 flex flex-col gap-3 flex-grow",children:[e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed flex-grow",children:e.description}),e.aura&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium pt-2 border-t border-border/30",children:[(0,a.jsx)(eA.A,{size:12,className:"GOOD"===e.aura?"text-green-400":"EVIL"===e.aura?"text-red-400":"text-gray-400"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Aura:"}),(0,a.jsx)("span",{className:"GOOD"===e.aura?"text-green-400":"EVIL"===e.aura?"text-red-400":"text-gray-400",children:l})]})]})]},e.id||"role-".concat(t))})}),0===d.length&&(0,a.jsx)("div",{className:"text-center py-10 opacity-50",children:"Nessun ruolo trovato con questo nome."})]})}var eC=r(4267),eE=r(1902),eO=r(1719),e_=r(6368),eR=r(98),eL=r(7825);function ez(){let[e,t]=(0,l.useState)("search"),[r,s]=(0,l.useState)([]),[i,o]=(0,l.useState)(!0),[n,d]=(0,l.useState)(""),[c,m]=(0,l.useState)([]),[x,u]=(0,l.useState)(!1),[p,g]=(0,l.useState)(!1),[h,b]=(0,l.useState)(!1),[f,v]=(0,l.useState)({joinType:"ALL",language:"",notFull:!1,minLevel:0,sortBy:"XP"});(0,l.useEffect)(()=>{async function e(){try{u(!0);let e=await k.searchClans("a");m(e),g(!0)}catch(e){console.error("Initial clan search failed",e)}finally{u(!1)}}(async function(){s(await k.getClanQuests()),o(!1)})(),e()},[]);let y=async e=>{e&&e.preventDefault(),u(!0),g(!0);try{let e={name:n,sortBy:f.sortBy,notFull:f.notFull,minLevel:f.minLevel>0?f.minLevel:void 0,language:f.language||void 0};"ALL"!==f.joinType&&(e.joinType=f.joinType);let t=await k.searchClans(e);m(t)}catch(e){console.error("Clan search failed",e),m([])}finally{u(!1)}},j=(e,t)=>{if(!e)return(0,a.jsx)(M.A,{size:20,className:"text-muted-foreground"});if(e.startsWith("font-awesome-5:")){let r=e.split(":");if(r.length>=2){let e=r[1],s=r[2]||"solid",l="fas";return"solid"===s?l="fas":"regular"===s?l="far":"light"===s?l="fal":"brands"===s&&(l="fab"),(0,a.jsx)("i",{className:"".concat(l," fa-").concat(e," text-xl"),style:{color:t||"#ffffff"}})}}return(0,a.jsx)(M.A,{size:20,className:"text-muted-foreground"})},w=r.filter(e=>e.rewards.some(e=>"GEMS"===e.type)),N=r.filter(e=>e.rewards.some(e=>"GOLD"===e.type)&&!e.rewards.some(e=>"GEMS"===e.type)),A=r.filter(e=>!e.rewards.some(e=>"GEMS"===e.type||"GOLD"===e.type));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-primary/20 rounded-xl text-primary",children:(0,a.jsx)(eA.A,{size:32})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-serif",children:"Clan & Quest"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Gestisci le missioni e cerca clan"})]})]}),(0,a.jsxs)("div",{className:"flex bg-black/20 p-1 rounded-lg border border-white/10",children:[(0,a.jsx)("button",{onClick:()=>t("search"),className:"px-4 py-2 rounded-md text-sm font-bold transition-all ".concat("search"===e?"bg-primary text-primary-foreground shadow-lg":"text-muted-foreground hover:text-foreground"),children:"Cerca Clan"}),(0,a.jsx)("button",{onClick:()=>t("quests"),className:"px-4 py-2 rounded-md text-sm font-bold transition-all ".concat("quests"===e?"bg-primary text-primary-foreground shadow-lg":"text-muted-foreground hover:text-foreground"),children:"Quest Attive"})]})]}),"search"===e?(0,a.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:[(0,a.jsxs)("form",{onSubmit:y,className:"relative max-w-2xl mx-auto mb-8 space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(ex.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Cerca un clan per nome...",value:n,onChange:e=>d(e.target.value),className:"w-full bg-card/30 border border-border rounded-xl py-4 pl-12 pr-6 text-lg focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all"}),(0,a.jsx)("button",{type:"submit",disabled:x,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-primary text-primary-foreground px-4 py-2 rounded-lg text-sm font-bold hover:bg-primary/90 disabled:opacity-50 transition-colors",children:x?(0,a.jsx)(F.A,{className:"animate-spin",size:16}):"Cerca"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{type:"button",onClick:()=>b(!h),className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[(0,a.jsx)(eC.A,{size:16}),(0,a.jsx)("span",{children:"Ricerca Avanzata"}),h?(0,a.jsx)(eE.A,{size:16}):(0,a.jsx)(eO.A,{size:16})]})}),h&&(0,a.jsx)("div",{className:"bg-card/20 border border-border rounded-xl p-6 animate-in fade-in slide-in-from-top-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Tipo Clan"}),(0,a.jsxs)("select",{value:f.joinType,onChange:e=>v(t=>({...t,joinType:e.target.value})),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-sm focus:outline-none focus:border-primary/50",children:[(0,a.jsx)("option",{value:"ALL",children:"Tutti"}),(0,a.jsx)("option",{value:"PUBLIC",children:"Pubblico"}),(0,a.jsx)("option",{value:"JOIN_BY_REQUEST",children:"Su Richiesta"}),(0,a.jsx)("option",{value:"PRIVATE",children:"Privato / Solo Invito"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Lingua"}),(0,a.jsxs)("select",{value:f.language,onChange:e=>v(t=>({...t,language:e.target.value})),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-sm focus:outline-none focus:border-primary/50",children:[(0,a.jsx)("option",{value:"",children:"Tutte le lingue"}),(0,a.jsx)("option",{value:"EN",children:"Inglese"}),(0,a.jsx)("option",{value:"DE",children:"Tedesco"}),(0,a.jsx)("option",{value:"FR",children:"Francese"}),(0,a.jsx)("option",{value:"ES",children:"Spagnolo"}),(0,a.jsx)("option",{value:"IT",children:"Italiano"}),(0,a.jsx)("option",{value:"PT",children:"Portoghese"}),(0,a.jsx)("option",{value:"RU",children:"Russo"}),(0,a.jsx)("option",{value:"TR",children:"Turco"}),(0,a.jsx)("option",{value:"PL",children:"Polacco"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Livello Minimo"}),(0,a.jsx)("input",{type:"number",min:"0",value:f.minLevel,onChange:e=>v(t=>({...t,minLevel:parseInt(e.target.value)||0})),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-sm focus:outline-none focus:border-primary/50"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs font-bold uppercase text-muted-foreground",children:"Ordina per"}),(0,a.jsxs)("select",{value:f.sortBy,onChange:e=>v(t=>({...t,sortBy:e.target.value})),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-sm focus:outline-none focus:border-primary/50",children:[(0,a.jsx)("option",{value:"XP",children:"XP"}),(0,a.jsx)("option",{value:"CREATION_TIME",children:"Data di Creazione"}),(0,a.jsx)("option",{value:"QUEST_HISTORY_COUNT",children:"Quest Completate"}),(0,a.jsx)("option",{value:"NAME",children:"Nome"}),(0,a.jsx)("option",{value:"MIN_LEVEL",children:"Livello Richiesto"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex items-center gap-2 pt-2",children:[(0,a.jsx)("div",{className:"w-5 h-5 rounded border border-white/20 flex items-center justify-center cursor-pointer transition-colors ".concat(f.notFull?"bg-primary border-primary":"bg-black/40"),onClick:()=>v(e=>({...e,notFull:!e.notFull})),children:f.notFull&&(0,a.jsx)(ed.A,{size:14,className:"text-primary-foreground"})}),(0,a.jsx)("span",{className:"text-sm cursor-pointer select-none",onClick:()=>v(e=>({...e,notFull:!e.notFull})),children:"Solo clan non pieni"})]})]})})]}),p&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold opacity-80",children:["Risultati (",c.length,")"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.map(e=>(0,a.jsxs)("div",{className:"bg-card/20 border border-border rounded-xl p-4 flex items-center gap-4 hover:bg-card/40 transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-black/40 flex items-center justify-center border border-white/10 shrink-0",children:j(e.icon,e.iconColor)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-lg leading-none mb-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Membri: ",e.memberCount]}),e.language&&(0,a.jsx)("span",{className:"uppercase border border-white/10 px-1 rounded",children:e.language})]}),e.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground/80 mt-2 line-clamp-1",children:e.description})]})]},e.id)),0===c.length&&!x&&(0,a.jsx)("div",{className:"col-span-full text-center py-10 opacity-50 border border-dashed border-border rounded-xl",children:"Nessun clan trovato con questo nome."})]})]})]}):(0,a.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:i?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"animate-spin mb-2"}),(0,a.jsx)("p",{children:"Caricamento Clan Quest..."})]}):(0,a.jsxs)("div",{className:"space-y-12 pb-20",children:[w.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-pink-400 border-b border-pink-500/20 pb-2",children:[(0,a.jsx)(e_.A,{className:"fill-current",size:24}),"Missioni Gemme (",w.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(e=>(0,a.jsxs)("div",{className:"group bg-card/20 border border-border rounded-xl overflow-hidden hover:bg-card/40 hover:border-pink-500/30 transition-all hover:-translate-y-1 duration-300 shadow-lg",children:[(0,a.jsxs)("div",{className:"relative aspect-video w-full bg-black/40",children:[e.promoImageUrl?(0,a.jsx)("img",{src:e.promoImageUrl,alt:e.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105 duration-500",onError:e=>{e.target.style.display="none",e.target.parentElement.classList.add("flex","items-center","justify-center")}}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground bg-gradient-to-br from-pink-900/20 to-transparent",children:(0,a.jsx)(eR.A,{size:48,className:"opacity-20"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent pointer-events-none"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,a.jsx)("h3",{className:"font-bold text-lg text-white leading-tight drop-shadow-md line-clamp-2",children:e.name})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 min-h-[3rem]",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground/60",children:"Ricompense"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.rewards.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border text-sm font-bold ".concat("GEMS"===e.type?"bg-pink-500/10 border-pink-500/30 text-pink-200":"GOLD"===e.type?"bg-yellow-500/10 border-yellow-500/30 text-yellow-200":"bg-black/40 border-white/10 text-muted-foreground"),children:["GOLD"===e.type&&(0,a.jsx)(eL.A,{size:14,className:"text-yellow-400"}),"GEMS"===e.type&&(0,a.jsx)(e_.A,{size:14,className:"text-pink-400"}),"XP"===e.type&&(0,a.jsx)(eR.A,{size:14,className:"text-blue-400"}),(0,a.jsxs)("span",{children:[e.amount," ",e.type]})]},t))})]})]})]},e.id))})]}),N.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-yellow-400 border-b border-yellow-500/20 pb-2",children:[(0,a.jsx)(eL.A,{className:"fill-current",size:24}),"Missioni Oro (",N.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>(0,a.jsxs)("div",{className:"group bg-card/20 border border-border rounded-xl overflow-hidden hover:bg-card/40 hover:border-yellow-500/30 transition-all hover:-translate-y-1 duration-300 shadow-lg",children:[(0,a.jsxs)("div",{className:"relative aspect-video w-full bg-black/40",children:[e.promoImageUrl?(0,a.jsx)("img",{src:e.promoImageUrl,alt:e.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105 duration-500",onError:e=>{e.target.style.display="none",e.target.parentElement.classList.add("flex","items-center","justify-center")}}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground bg-gradient-to-br from-yellow-900/20 to-transparent",children:(0,a.jsx)(eR.A,{size:48,className:"opacity-20"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent pointer-events-none"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,a.jsx)("h3",{className:"font-bold text-lg text-white leading-tight drop-shadow-md line-clamp-2",children:e.name})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 min-h-[3rem]",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground/60",children:"Ricompense"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.rewards.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border text-sm font-bold ".concat("GEMS"===e.type?"bg-pink-500/10 border-pink-500/30 text-pink-200":"GOLD"===e.type?"bg-yellow-500/10 border-yellow-500/30 text-yellow-200":"bg-black/40 border-white/10 text-muted-foreground"),children:["GOLD"===e.type&&(0,a.jsx)(eL.A,{size:14,className:"text-yellow-400"}),"GEMS"===e.type&&(0,a.jsx)(e_.A,{size:14,className:"text-pink-400"}),"XP"===e.type&&(0,a.jsx)(eR.A,{size:14,className:"text-blue-400"}),(0,a.jsxs)("span",{children:[e.amount," ",e.type]})]},t))})]})]})]},e.id))})]}),A.length>0&&(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2 text-blue-400 border-b border-blue-500/20 pb-2",children:[(0,a.jsx)(eR.A,{className:"fill-current",size:24}),"Altre Missioni (",A.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(e=>(0,a.jsxs)("div",{className:"group bg-card/20 border border-border rounded-xl overflow-hidden hover:bg-card/40 transition-all hover:-translate-y-1 duration-300 shadow-lg",children:[(0,a.jsxs)("div",{className:"relative aspect-video w-full bg-black/40",children:[e.promoImageUrl?(0,a.jsx)("img",{src:e.promoImageUrl,alt:e.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105 duration-500",onError:e=>{e.target.style.display="none",e.target.parentElement.classList.add("flex","items-center","justify-center")}}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground bg-gradient-to-br from-blue-900/20 to-transparent",children:(0,a.jsx)(eR.A,{size:48,className:"opacity-20"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent pointer-events-none"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,a.jsx)("h3",{className:"font-bold text-lg text-white leading-tight drop-shadow-md line-clamp-2",children:e.name})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 min-h-[3rem]",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground/60",children:"Ricompense"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.rewards.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-black/40 border border-white/10 text-sm font-bold text-muted-foreground",children:(0,a.jsxs)("span",{children:[e.amount," ",e.type]})},t))})]})]})]},e.id))})]}),0===r.length&&(0,a.jsx)("div",{className:"col-span-full text-center py-20 opacity-50 border border-dashed border-border rounded-xl",children:"Nessuna quest attiva al momento."})]})})]})}var eT=r(2423),eM=r(6644);function eD(){var e,t,r;let{rankedSeason:s,leaderboard:i,highscores:o}=O(),[n,d]=(0,l.useState)("leaderboard"),[c,m]=(0,l.useState)({}),[x,u]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),[h,b]=(0,l.useState)(null),[f,v]=(0,l.useState)(!1),[y,j]=(0,l.useState)(null),w=async e=>{if(e.preventDefault(),p.trim()){v(!0),j(null),b(null);try{let e=await k.searchPlayer(p.trim());e?b(e):j("Giocatore non trovato.")}catch(e){j("Errore durante la ricerca.")}finally{v(!1)}}};(0,l.useEffect)(()=>{let e=!0;return(async()=>{let t="leaderboard"===n?i:o;if(!t.length)return;let r=t.map(e=>e.playerId).filter(e=>!c[e]);if(0!==r.length){u(!0);for(let t=0;t<r.length&&e;t+=5){let a=r.slice(t,t+5),s={};await Promise.all(a.map(async e=>{try{let t=await k.getPlayerProfile(e);t&&t.equippedAvatar&&t.equippedAvatar.url&&(s[e]=t.equippedAvatar.url)}catch(t){console.error("Failed to fetch avatar for ".concat(e),t)}})),e&&(m(e=>({...e,...s})),await new Promise(e=>setTimeout(e,1e3)))}e&&u(!1)}})(),()=>{e=!1}},[n,i,o]);let N=e=>new Date(e).toLocaleDateString("it-IT",{day:"numeric",month:"long",year:"numeric"});return(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s&&(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-purple-900/50 via-indigo-900/50 to-blue-900/50 border border-indigo-500/30 p-8 shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:(0,a.jsx)(T.A,{size:200})}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("span",{className:"px-3 py-1 rounded-full bg-indigo-500/20 text-indigo-300 border border-indigo-500/30 text-xs font-bold uppercase tracking-wider",children:["Stagione ",s.number]}),new Date>=new Date(s.startTime)&&new Date<=new Date(s.endTime)&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-green-400 text-xs font-bold animate-pulse",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-400"})," LIVE"]})]}),(0,a.jsx)("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-white mb-2",children:"Competizione Ranked"}),(0,a.jsxs)("p",{className:"text-indigo-200 flex items-center gap-2",children:[(0,a.jsx)(eT.A,{size:16}),N(s.startTime)," - ",N(s.endTime)]})]}),(0,a.jsxs)("div",{className:"bg-black/30 backdrop-blur-md rounded-xl p-4 border border-white/10 min-w-[200px]",children:[(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"Status Stagione"}),(0,a.jsx)("div",{className:"text-lg font-bold text-white",children:"In Corso"}),(0,a.jsx)("div",{className:"w-full bg-gray-700 h-1.5 rounded-full mt-3 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-indigo-500 h-full w-3/4"})})]})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("form",{onSubmit:w,className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(ex.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Cerca un giocatore per username...",value:p,onChange:e=>g(e.target.value),className:"w-full pl-9 pr-4 py-2 bg-black/20 border border-border/50 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary/50"}),p&&(0,a.jsx)("button",{type:"button",onClick:()=>{g(""),b(null),j(null)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-white",children:(0,a.jsx)(P.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("button",{type:"submit",disabled:f||!p.trim(),className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary border border-primary/30 rounded-lg text-sm font-bold transition-colors disabled:opacity-50",children:f?"Cercando...":"Cerca"})]}),h&&(0,a.jsx)("div",{className:"mt-4 p-6 bg-card/40 border border-primary/30 rounded-xl animate-in fade-in slide-in-from-top-2",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start",children:[(0,a.jsx)("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full border-4 border-primary/20 bg-black/40 overflow-hidden flex-shrink-0",children:(null===(e=h.equippedAvatar)||void 0===e?void 0:e.url)?(0,a.jsx)("img",{src:h.equippedAvatar.url,alt:h.username,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:(0,a.jsx)(L.A,{size:48})})}),(0,a.jsxs)("div",{className:"flex-1 text-center md:text-left space-y-4 w-full",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("h3",{className:"text-2xl font-bold text-white flex items-center justify-center md:justify-start gap-2",children:[h.username,(0,a.jsxs)("span",{className:"text-sm px-2 py-0.5 bg-primary/20 text-primary rounded-full border border-primary/20 font-mono",children:["Lvl ",h.level]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg border border-white/5",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Vittorie"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-400",children:(null===(t=h.gameStats)||void 0===t?void 0:t.totalWinCount)||0})]}),(0,a.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg border border-white/5",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Sconfitte"}),(0,a.jsx)("div",{className:"text-lg font-bold text-red-400",children:(null===(r=h.gameStats)||void 0===r?void 0:r.totalLoseCount)||0})]}),(0,a.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg border border-white/5",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Ranked Skill"}),(0,a.jsx)("div",{className:"text-lg font-bold text-indigo-400",children:h.rankedSeasonSkill&&h.rankedSeasonSkill>-1?h.rankedSeasonSkill:"N/A"})]}),(0,a.jsxs)("div",{className:"bg-black/20 p-3 rounded-lg border border-white/5",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:"Best Rank"}),(0,a.jsx)("div",{className:"text-lg font-bold text-yellow-400",children:h.rankedSeasonBestRank&&h.rankedSeasonBestRank>0?"#".concat(h.rankedSeasonBestRank):"N/A"})]})]})]})]})}),y&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm text-center",children:y})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 border-b border-border/40 pb-1",children:[(0,a.jsxs)("button",{onClick:()=>d("leaderboard"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("leaderboard"===n?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.A,{size:18}),"Classifica Stagionale"]}),"leaderboard"===n&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-t-full"})]}),(0,a.jsxs)("button",{onClick:()=>d("highscores"),className:"pb-3 px-4 text-sm font-bold transition-all relative ".concat("highscores"===n?"text-primary":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eM.A,{size:18}),"Hall of Fame (XP)"]}),"highscores"===n&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-t-full"})]})]}),(0,a.jsx)("div",{className:"bg-card/20 rounded-2xl border border-border/50 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-black/20 text-muted-foreground text-xs uppercase tracking-wider border-b border-border/30",children:[(0,a.jsx)("th",{className:"p-4 w-20 text-center",children:"Rank"}),(0,a.jsx)("th",{className:"p-4",children:"Giocatore"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"leaderboard"===n?"Skill Rating":"Totale XP"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border/20",children:0===("leaderboard"===n?i:o).length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"p-8 text-center text-muted-foreground",children:"Nessun dato disponibile per questa classifica."})}):("leaderboard"===n?i:o).map((e,t)=>{let r=t+1,s=r<=3;return(0,a.jsxs)("tr",{className:"\n                        hover:bg-primary/5 transition-colors\n                        ".concat(1===r?"bg-yellow-500/5":"","\n                        ").concat(2===r?"bg-gray-400/5":"","\n                        ").concat(3===r?"bg-amber-700/5":"","\n                      "),children:[(0,a.jsxs)("td",{className:"p-4 text-center font-bold",children:[1===r&&(0,a.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD47"}),2===r&&(0,a.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD48"}),3===r&&(0,a.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD49"}),r>3&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:["#",r]})]}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold border overflow-hidden ".concat(s?"border-primary/50 bg-primary/10 text-primary":"border-border bg-card text-muted-foreground"),children:c[e.playerId]?(0,a.jsx)("img",{src:c[e.playerId],alt:e.username,className:"w-full h-full object-cover"}):(0,a.jsx)(L.A,{size:16})}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"font-bold ".concat(s?"text-foreground":"text-muted-foreground"),children:e.username})})]})}),(0,a.jsx)("td",{className:"p-4 text-right font-mono font-bold text-lg",children:"leaderboard"===n?(e.skill||0).toLocaleString():(e.xp||0).toLocaleString()})]},e.playerId||t)})})]})})})]})}var eP=r(865),eU=r(6233),eB=r(7508),eG=r(6889),eW=r(7072);let eF={"xp-increase-win":"https://www.wolvesville.com/static/media/ability_icon_xp_boost_win.1d22572ff98a1f18838c.png","xp-increase-quest":"https://www.wolvesville.com/static/media/ability_icon_xp_boost_quest.1d22572ff98a1f18838c.png","xp-increase-play-with-friends":"https://www.wolvesville.com/static/media/ability_icon_xp_boost_friends.1d22572ff98a1f18838c.png","xp-increase-bp":"https://www.wolvesville.com/static/media/ability_icon_xp_boost_battle_pass.1d22572ff98a1f18838c.png","xp-increase-talisman":"https://www.wolvesville.com/static/media/ability_icon_talisman_boost.0d22572ff98a1f18838c.png","xp-increase-play-with-clan":"https://www.wolvesville.com/static/media/ability_icon_xp_boost_quest.1d22572ff98a1f18838c.png","talismans-no-consume":"https://www.wolvesville.com/static/media/ability_icon_talismans_no_consume.1d22572ff98a1f18838c.png","talismans-increase-effect":"https://www.wolvesville.com/static/media/ability_icon_talisman_boost.0d22572ff98a1f18838c.png","rose-increase-received":"https://www.wolvesville.com/static/media/ability_icon_rose_boost.1d22572ff98a1f18838c.png","rose-single-boost":"https://www.wolvesville.com/static/media/ability_icon_rose_boost.1d22572ff98a1f18838c.png","rose-single-no-consume":"https://www.wolvesville.com/static/media/ability_icon_rose_boost.1d22572ff98a1f18838c.png","rose-server-boost":"https://www.wolvesville.com/static/media/ability_icon_rose_boost.1d22572ff98a1f18838c.png","clan-quest-time-reduction":"https://www.wolvesville.com/static/media/ability_icon_clan_quest_time.1d22572ff98a1f18838c.png","clan-quest-time-increase-by-play-time":"https://www.wolvesville.com/static/media/ability_icon_clan_quest_time.1d22572ff98a1f18838c.png","chat-stats":"https://www.wolvesville.com/static/media/ability_icon_xp_boost_win.1d22572ff98a1f18838c.png","voting-history":"https://www.wolvesville.com/static/media/ability_icon_xp_boost_win.1d22572ff98a1f18838c.png"},eH={"xp-increase-win":"Bonus XP Vittoria","xp-increase-quest":"Bonus XP Missioni Clan","xp-increase-play-with-friends":"Bonus XP Amici","xp-increase-bp":"Bonus XP Battle Pass","xp-increase-talisman":"Bonus XP Talismani","xp-increase-play-with-clan":"Bonus XP Giocando con Clan","talismans-no-consume":"Talismani Infiniti","talismans-increase-effect":"Potenziamento Talismani","rose-increase-received":"Bonus Rose Ricevute","rose-single-boost":"Bonus Rose Singole","rose-single-no-consume":"Rose Singole Infinite","rose-server-boost":"Bonus Rose Server","clan-quest-time-reduction":"Riduzione Tempo Missioni","clan-quest-time-increase-by-play-time":"Tempo Missioni (Playtime)","chat-stats":"Statistiche Chat","voting-history":"Cronologia Voti"},eY=e=>{if(!e)return null;let t=e.replace(/-\d+$/,"").trim();return eF[t]?eF[t]:t.includes("xp")?"https://www.wolvesville.com/static/media/ability_icon_xp_boost_win.1d22572ff98a1f18838c.png":t.includes("talisman")?"https://www.wolvesville.com/static/media/ability_icon_talisman_boost.0d22572ff98a1f18838c.png":t.includes("rose")?"https://www.wolvesville.com/static/media/ability_icon_rose_boost.1d22572ff98a1f18838c.png":null},eK=e=>{if(!e)return"";let t=e.replace(/-\d+$/,"").trim();return eH[t]||t};function eq(){var e,t,r,s,i,o,n;let{roles:d}=O(),[c,m]=(0,l.useState)(""),[x,u]=(0,l.useState)(!1),[p,g]=(0,l.useState)(null),[h,b]=(0,l.useState)(null),[f,v]=(0,l.useState)("overview"),y=async e=>{if(e.preventDefault(),c.trim()){u(!0),b(null),g(null);try{let e=await k.searchPlayer(c.trim());if(!e){b("Giocatore non trovato."),u(!1);return}let t=await k.getPlayerProfile(e.id);t?(!t.personalMessage&&e.personalMessage&&(t.personalMessage=e.personalMessage),g(t)):g(e)}catch(e){console.error("Profile search error:",e),b("Si \xe8 verificato un errore durante la ricerca.")}finally{u(!1)}}},j=e=>{var t;let r=d.find(t=>t.id===e);return(null==r?void 0:null===(t=r.image)||void 0===t?void 0:t.url)||null},w=e=>{let t=d.find(t=>t.id===e);return(null==t?void 0:t.name)||e},N=(()=>{var e;if(!(null==p?void 0:null===(e=p.gameStats)||void 0===e?void 0:e.achievements))return[];let t=p.gameStats.achievements;return Array.isArray(t)?t:"object"==typeof t?Object.values(t):[]})();return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"transition-all duration-500 ".concat(p?"":"py-20 flex flex-col items-center"),children:[!p&&(0,a.jsxs)("div",{className:"text-center mb-8 space-y-2",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold font-serif gold-text",children:"Cerca Giocatore"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Trova profili, statistiche e carte ruolo"})]}),(0,a.jsxs)("form",{onSubmit:y,className:"relative w-full ".concat(p?"max-w-md":"max-w-xl"),children:[(0,a.jsx)(ex.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Inserisci username...",value:c,onChange:e=>m(e.target.value),className:"w-full pl-12 pr-12 py-4 bg-black/20 border border-border/50 rounded-xl text-lg focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all shadow-lg backdrop-blur-sm"}),c&&(0,a.jsx)("button",{type:"button",onClick:()=>m(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-white",children:(0,a.jsx)(P.A,{className:"w-5 h-5"})})]}),x&&(0,a.jsxs)("div",{className:"mt-8 flex flex-col items-center gap-2 animate-pulse text-muted-foreground",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-sm font-serif",children:"Ricerca in corso..."})]}),h&&(0,a.jsx)("div",{className:"mt-6 p-4 bg-red-500/10 border border-red-500/20 text-red-400 rounded-xl text-center animate-in fade-in slide-in-from-top-2",children:h})]}),p&&!x&&(0,a.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden bg-card/40 border border-border/50 rounded-2xl p-6 md:p-10 shadow-2xl",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent pointer-events-none"}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col md:flex-row items-center md:items-start gap-8",children:[(0,a.jsxs)("div",{className:"w-40 h-40 md:w-48 md:h-48 rounded-full border-4 border-primary/20 bg-black/40 overflow-hidden shadow-2xl flex-shrink-0 relative group",children:[(null===(e=p.equippedAvatar)||void 0===e?void 0:e.url)?(0,a.jsx)("img",{src:p.equippedAvatar.url,alt:p.username,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:(0,a.jsx)(L.A,{size:64})}),(0,a.jsx)("div",{className:"absolute inset-0 ring-1 ring-inset ring-white/10 rounded-full"})]}),(0,a.jsxs)("div",{className:"flex-1 text-center md:text-left space-y-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold font-serif gold-text mb-2 tracking-tight",children:p.username}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3",children:[(0,a.jsxs)("span",{className:"px-3 py-1 bg-primary/20 text-primary border border-primary/20 rounded-full font-mono font-bold text-sm",children:["LVL ",p.level]}),p.clanId&&(0,a.jsxs)("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-300 border border-purple-500/20 rounded-full text-sm font-bold flex items-center gap-2",children:[(0,a.jsx)(eA.A,{size:14}),"Clan Member"]}),p.rankedSeasonSkill&&(0,a.jsxs)("span",{className:"px-3 py-1 bg-indigo-500/20 text-indigo-300 border border-indigo-500/20 rounded-full text-sm font-bold flex items-center gap-2",children:[(0,a.jsx)(T.A,{size:14}),"Skill ",p.rankedSeasonSkill]})]})]}),p.personalMessage?(0,a.jsxs)("p",{className:"text-lg text-gray-300 italic max-w-2xl border-l-4 border-primary/30 pl-4 py-1",children:['"',p.personalMessage,'"']}):(0,a.jsx)("p",{className:"text-muted-foreground italic text-sm",children:"Nessuna biografia disponibile"}),(0,a.jsxs)("div",{className:"pt-4 flex flex-col gap-1 text-xs text-muted-foreground font-mono",children:[(0,a.jsxs)("span",{children:["ID: ",p.id]}),p.lastOnline&&(0,a.jsxs)("span",{children:["Ultimo accesso: ",new Date(p.lastOnline).toLocaleDateString()]}),p.creationTime&&(0,a.jsxs)("span",{children:["Membro dal: ",new Date(p.creationTime).toLocaleDateString()]})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-center md:justify-start border-b border-border/40 overflow-x-auto",children:[{id:"overview",label:"Panoramica",icon:eP.A},{id:"roles",label:"Progressi Ruoli",icon:L.A},{id:"cards",label:"Carte Equipaggiate",icon:eU.A},{id:"badges",label:"Badges",icon:eB.A}].map(e=>(0,a.jsxs)("button",{onClick:()=>v(e.id),className:"flex items-center gap-2 px-6 py-4 text-sm font-bold transition-all relative whitespace-nowrap ".concat(f===e.id?"text-primary":"text-muted-foreground hover:text-foreground hover:bg-white/5"),children:[(0,a.jsx)(e.icon,{size:18}),e.label,f===e.id&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-t-full shadow-[0_-2px_10px_rgba(234,179,8,0.5)]"})]},e.id))}),(0,a.jsxs)("div",{className:"min-h-[300px]",children:["overview"===f&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card/20 p-6 rounded-xl border border-border/50 hover:border-primary/30 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground mb-4",children:[(0,a.jsx)(T.A,{size:20,className:"text-yellow-500"}),(0,a.jsx)("span",{className:"text-xs uppercase tracking-wider font-bold",children:"Vittorie Totali"})]}),(0,a.jsx)("div",{className:"text-4xl font-bold text-white mb-1",children:(null===(r=p.gameStats)||void 0===r?void 0:null===(t=r.totalWinCount)||void 0===t?void 0:t.toLocaleString())||0}),(0,a.jsx)("div",{className:"text-xs text-green-400 font-mono",children:"Partite vinte"})]}),(0,a.jsxs)("div",{className:"bg-card/20 p-6 rounded-xl border border-border/50 hover:border-primary/30 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground mb-4",children:[(0,a.jsx)(P.A,{size:20,className:"text-red-500"}),(0,a.jsx)("span",{className:"text-xs uppercase tracking-wider font-bold",children:"Sconfitte Totali"})]}),(0,a.jsx)("div",{className:"text-4xl font-bold text-white mb-1",children:(null===(i=p.gameStats)||void 0===i?void 0:null===(s=i.totalLoseCount)||void 0===s?void 0:s.toLocaleString())||0}),(0,a.jsx)("div",{className:"text-xs text-red-400 font-mono",children:"Partite perse"})]}),(0,a.jsxs)("div",{className:"bg-card/20 p-6 rounded-xl border border-border/50 hover:border-primary/30 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground mb-4",children:[(0,a.jsx)(eG.A,{size:20,className:"text-blue-500"}),(0,a.jsx)("span",{className:"text-xs uppercase tracking-wider font-bold",children:"Tempo di Gioco"})]}),(0,a.jsx)("div",{className:"text-4xl font-bold text-white mb-1",children:(e=>{let t=Math.floor(e/60);return"".concat(t.toLocaleString()," ore")})((null===(o=p.gameStats)||void 0===o?void 0:o.totalPlayTimeInMinutes)||0)}),(0,a.jsx)("div",{className:"text-xs text-blue-400 font-mono",children:"Totale ore"})]}),(0,a.jsxs)("div",{className:"bg-card/20 p-6 rounded-xl border border-border/50 hover:border-primary/30 transition-colors relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute right-0 top-0 p-4 opacity-5",children:(0,a.jsx)(eB.A,{size:100})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-muted-foreground mb-4",children:[(0,a.jsx)(eB.A,{size:20,className:"text-purple-500"}),(0,a.jsx)("span",{className:"text-xs uppercase tracking-wider font-bold",children:"Win Rate"})]}),(0,a.jsxs)("div",{className:"text-4xl font-bold text-white mb-1",children:[p.gameStats?(p.gameStats.totalWinCount/(p.gameStats.totalWinCount+p.gameStats.totalLoseCount)*100).toFixed(1):0,"%"]}),(0,a.jsx)("div",{className:"text-xs text-purple-400 font-mono",children:"Percentuale vittorie"})]})]}),"roles"===f&&(0,a.jsx)("div",{children:N&&0!==N.length?(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:N.sort((e,t)=>t.level-e.level).map(e=>{let t=w(e.roleId),r=j(e.roleId);return(0,a.jsxs)("div",{className:"bg-card/20 border border-border/50 rounded-xl p-4 flex flex-col items-center gap-3 hover:bg-card/40 transition-all group",children:[(0,a.jsxs)("div",{className:"w-16 h-16 relative",children:[r?(0,a.jsx)("img",{src:r,alt:t,className:"w-full h-full object-contain drop-shadow-lg group-hover:scale-110 transition-transform"}):(0,a.jsx)("div",{className:"w-full h-full bg-primary/10 rounded-full flex items-center justify-center",children:(0,a.jsx)(L.A,{size:24,className:"text-primary/50"})}),(0,a.jsxs)("div",{className:"absolute -bottom-2 -right-2 bg-black/80 border border-primary/30 text-primary text-xs font-bold px-2 py-0.5 rounded-full shadow-lg",children:["Lvl ",e.level]})]}),(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsx)("div",{className:"font-bold text-sm truncate w-full",title:t,children:t}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[e.points," / ",e.pointsNextLevel," XP"]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 h-1 rounded-full mt-2 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-primary h-full transition-all duration-1000",style:{width:"".concat(Math.min(100,e.points/e.pointsNextLevel*100),"%")}})})]})]},e.roleId)})}):(0,a.jsxs)("div",{className:"text-center py-20 text-muted-foreground",children:[(0,a.jsx)(L.A,{size:48,className:"mx-auto mb-4 opacity-20"}),(0,a.jsx)("p",{children:"Nessun progresso ruolo trovato."})]})}),"cards"===f&&(0,a.jsx)("div",{children:p.roleCards&&0!==p.roleCards.length?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[...p.roleCards].sort((e,t)=>{let r={MYTHICAL:5,MYTHIC:5,LEGENDARY:4,EPIC:3,RARE:2,COMMON:1},a=r[e.rarity]||0;return(r[t.rarity]||0)-a}).map((e,t)=>{let r=e.roleIdBase||e.roleId1,s=e.roleIdsAdvanced||(e.roleId2?[e.roleId2]:[]),l=w(r||""),i=j(r||""),o=[e.abilityId1,e.abilityId2,e.abilityId3,e.abilityId4,e.abilityId5].filter(Boolean);return(0,a.jsx)("div",{className:"relative p-1 rounded-xl bg-gradient-to-br ".concat("MYTHICAL"===e.rarity||"MYTHIC"===e.rarity?"from-pink-500/50 via-red-500/50 to-purple-900/50 border border-red-500/50":"LEGENDARY"===e.rarity?"from-yellow-500/50 to-yellow-900/50":"EPIC"===e.rarity?"from-purple-500/50 to-purple-900/50":"RARE"===e.rarity?"from-blue-500/50 to-blue-900/50":"from-gray-500/50 to-gray-900/50"),children:(0,a.jsxs)("div",{className:"bg-black/80 rounded-lg p-4 h-full relative overflow-hidden",children:[i&&(0,a.jsx)("img",{src:i,className:"absolute -right-4 -bottom-4 w-32 h-32 opacity-10 rotate-12",alt:""}),(0,a.jsx)("div",{className:"flex items-start justify-between mb-4 relative z-10",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 relative",children:i?(0,a.jsx)("img",{src:i,alt:l,className:"w-full h-full object-contain"}):(0,a.jsx)(L.A,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-lg",children:l}),(0,a.jsx)("div",{className:"text-xs px-2 py-0.5 rounded-full inline-block border ".concat("MYTHICAL"===e.rarity||"MYTHIC"===e.rarity?"text-pink-400 border-pink-500/30 bg-pink-500/10":"LEGENDARY"===e.rarity?"text-yellow-400 border-yellow-500/30 bg-yellow-500/10":"EPIC"===e.rarity?"text-purple-400 border-purple-500/30 bg-purple-500/10":"RARE"===e.rarity?"text-blue-400 border-blue-500/30 bg-blue-500/10":"text-gray-400 border-gray-500/30 bg-gray-500/10"),children:e.rarity})]})]})}),s.length>0&&(0,a.jsxs)("div",{className:"space-y-2 mb-4 relative z-10",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Ruoli Avanzati"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white/5 p-1.5 rounded-lg border border-white/10",children:[j(e)&&(0,a.jsx)("img",{src:j(e),className:"w-6 h-6 object-contain",alt:e}),(0,a.jsx)("span",{className:"text-sm",children:w(e)})]},e))})]}),o.length>0&&(0,a.jsxs)("div",{className:"space-y-2 relative z-10",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:["Abilit\xe0 (",o.length,")"]}),(0,a.jsx)("div",{className:"space-y-1",children:o.map((e,t)=>{let r=eY(e),s=eK(e);return(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[r?(0,a.jsx)("img",{src:r,alt:"",className:"w-5 h-5 object-contain",onError:e=>{e.currentTarget.style.display="none";let t=e.currentTarget.nextElementSibling;t&&t.classList.remove("hidden")}}):null,(0,a.jsx)(eW.A,{size:14,className:"text-yellow-500 ".concat(r?"hidden":"")}),(0,a.jsx)("span",{className:"truncate",children:s})]},t)})})]})]})},t)})}):(0,a.jsxs)("div",{className:"text-center py-20 text-muted-foreground",children:[(0,a.jsx)(eU.A,{size:48,className:"mx-auto mb-4 opacity-20"}),(0,a.jsx)("p",{children:"Nessuna carta equipaggiata trovata."})]})}),"badges"===f&&(0,a.jsxs)("div",{className:"text-center py-20 bg-card/10 rounded-2xl border border-dashed border-border/50",children:[(0,a.jsx)(eB.A,{size:64,className:"mx-auto mb-6 text-muted-foreground/30"}),(0,a.jsxs)("h3",{className:"text-xl font-bold mb-2",children:["Badge Collezionati: ",(null===(n=p.badgeIds)||void 0===n?void 0:n.length)||0]}),(0,a.jsx)("p",{className:"text-muted-foreground max-w-md mx-auto mb-6",children:"Le icone e i dettagli dei badge non sono ancora disponibili."}),p.badgeIds&&p.badgeIds.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-2 max-w-2xl mx-auto",children:p.badgeIds.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-white/5 rounded border border-white/10 text-xs font-mono text-muted-foreground",children:e},e))})]})]})]})]})}function eV(){let{roles:e,items:t,roleIcons:r,activeOffers:c,loading:m}=O(),[x,u]=(0,l.useState)("dashboard"),p="wardrobe"!==x;return(0,a.jsxs)("div",{className:"flex min-h-screen",children:[p&&(0,a.jsx)(G,{activeTab:x,onTabChange:e=>{u(e)}}),(0,a.jsx)("main",{className:(0,s.cn)("flex-1 p-4 md:p-8 overflow-y-auto h-screen custom-scrollbar transition-all duration-300",p?"md:ml-0":"ml-0"),children:m?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full space-y-4 animate-pulse",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-primary/30 border-t-primary rounded-full animate-spin"}),(0,a.jsx)("p",{className:"text-muted-foreground font-serif text-base md:text-lg",children:"Caricamento Wolvesville DB..."})]}):(()=>{let s=e=>{let{title:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8 pb-4 border-b border-border/40 animate-in fade-in slide-in-from-left-4 duration-500",children:[(0,a.jsx)("button",{onClick:()=>u("dashboard"),className:"p-2 rounded-full bg-primary/10 hover:bg-primary/20 text-primary transition-colors group",title:"Torna alla Dashboard",children:(0,a.jsx)(i.A,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"})}),(0,a.jsx)("h2",{className:"text-3xl font-serif font-bold text-foreground",children:t})]})};switch(x){case"dashboard":return(0,a.jsxs)("div",{className:"space-y-4 md:space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"p-6 md:p-8 rounded-2xl bg-gradient-to-br from-primary/20 via-primary/5 to-transparent border border-primary/20 relative overflow-hidden shadow-xl",children:[(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-serif font-bold mb-2",children:"Benvenuto su Wolvesville DB"}),(0,a.jsx)("p",{className:"text-sm md:text-lg text-muted-foreground max-w-xl",children:"Il tuo hub definitivo per esplorare ruoli, creare outfit e gestire le attivit\xe0 del clan. Sincronizzato in tempo reale con i server ufficiali."})]}),(0,a.jsx)("div",{className:"absolute -right-10 -bottom-20 opacity-20 rotate-12 pointer-events-none hidden md:block",children:(0,a.jsx)($.default,{src:"https://cdn.wolvesville.com/roleIcons/werewolf.png",width:300,height:300,alt:"Werewolf"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6",children:[(0,a.jsxs)("div",{className:"bg-card/40 p-4 md:p-6 rounded-xl border border-border hover:border-primary/50 transition-all cursor-pointer group",onClick:()=>u("roles"),children:[(0,a.jsx)("h3",{className:"text-xl md:text-2xl font-bold mb-1 group-hover:text-primary transition-colors",children:e.length}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Ruoli Indicizzati"})]}),(0,a.jsxs)("div",{className:"bg-card/40 p-4 md:p-6 rounded-xl border border-border hover:border-primary/50 transition-all cursor-pointer group",onClick:()=>u("wardrobe"),children:[(0,a.jsx)("h3",{className:"text-xl md:text-2xl font-bold mb-1 group-hover:text-primary transition-colors",children:t.length}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Oggetti Cosmetici"})]}),(0,a.jsxs)("div",{className:"bg-card/40 p-4 md:p-6 rounded-xl border border-border hover:border-primary/50 transition-all cursor-pointer group",onClick:()=>u("roleIcons"),children:[(0,a.jsx)("h3",{className:"text-xl md:text-2xl font-bold mb-1 group-hover:text-primary transition-colors",children:r.length}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Icone Ruoli"})]}),(0,a.jsxs)("div",{className:"bg-card/40 p-4 md:p-6 rounded-xl border border-border hover:border-primary/50 transition-all cursor-pointer group",onClick:()=>u("ranked"),children:[(0,a.jsx)("h3",{className:"text-xl md:text-2xl font-bold mb-1 group-hover:text-primary transition-colors",children:"Ranked"}),(0,a.jsx)("p",{className:"text-xs md:text-sm text-muted-foreground",children:"Classifiche"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 pb-2 border-b border-border/40",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-yellow-500/10 text-yellow-500",children:(0,a.jsx)(o.A,{size:20,className:"md:w-6 md:h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-serif font-bold text-foreground",children:"Offerte del Giorno"}),(0,a.jsxs)("p",{className:"text-xs md:text-sm text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Live dal Negozio"]})]})]}),0===c.length?(0,a.jsx)("div",{className:"p-6 md:p-8 text-center border border-dashed border-border rounded-xl bg-card/20",children:(0,a.jsx)("p",{className:"text-sm md:text-base text-muted-foreground",children:"Nessuna offerta attiva al momento o caricamento in corso..."})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:c.map(e=>{var t,r,s;return(0,a.jsxs)("div",{className:"group relative bg-card/40 rounded-xl overflow-hidden border border-border hover:border-primary/50 transition-all hover:shadow-lg hover:shadow-primary/10",children:[(0,a.jsxs)("div",{className:"aspect-[2/1] relative overflow-hidden bg-black/20",children:[e.promoImageUrl?(0,a.jsx)($.default,{src:e.promoImageUrl,alt:"Offer Promo",fill:!0,className:"object-cover transition-transform duration-700 group-hover:scale-110"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/10 to-transparent",children:(0,a.jsx)(n.A,{className:"w-12 h-12 text-primary/20"})}),(0,a.jsxs)("div",{className:"absolute top-3 right-3 flex flex-col gap-1 items-end",children:[e.costInGems?(0,a.jsxs)("span",{className:"bg-black/60 backdrop-blur border border-pink-500/30 text-pink-400 px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-1",children:["\uD83D\uDC8E ",e.costInGems]}):null,e.costInGold?(0,a.jsxs)("span",{className:"bg-black/60 backdrop-blur border border-yellow-500/30 text-yellow-400 px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-1",children:["\uD83E\uDE99 ",e.costInGold]}):null]})]}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg leading-tight",children:e.avatarItemSets&&e.avatarItemSets.length>0?e.avatarItemSets[0].name:"Bundle Speciale"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[(0,a.jsx)(d.A,{size:12})," Scade presto"]})]})}),(0,a.jsxs)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-primary/20",children:[null===(t=e.avatarItemSets)||void 0===t?void 0:t.map(e=>(0,a.jsxs)("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded border border-primary/20 whitespace-nowrap",children:["Set: ",e.name]},e.id)),null===(r=e.items)||void 0===r?void 0:r.map(e=>(0,a.jsxs)("span",{className:"text-xs bg-secondary/20 text-secondary-foreground px-2 py-1 rounded border border-secondary/20 whitespace-nowrap",children:["Item: ",e.rarity]},e.id)),null===(s=e.rewards)||void 0===s?void 0:s.map((e,t)=>(0,a.jsxs)("span",{className:"text-xs bg-white/5 text-muted-foreground px-2 py-1 rounded border border-white/10 whitespace-nowrap",children:[e.amount," ",e.type]},t))]})]})]},e.id)})})]})]});case"wardrobe":return(0,a.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,a.jsx)(s,{title:"Guardaroba & Item"}),(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row items-start gap-4 md:gap-8",children:[(0,a.jsx)("div",{className:"w-full xl:w-[450px] shrink-0 xl:sticky xl:top-4 self-start z-50",children:(0,a.jsx)(en,{})}),(0,a.jsx)("div",{className:"flex-grow w-full",children:(0,a.jsx)("div",{className:"bg-card/20 rounded-xl border border-border/50 p-1",children:(0,a.jsx)(eN,{items:t,loading:m})})})]})]});case"roles":return(0,a.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,a.jsx)(s,{title:"Galleria Ruoli"}),(0,a.jsx)(eI,{roles:e})]});case"clans":return(0,a.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,a.jsx)(s,{title:"Gestione Clan"}),(0,a.jsx)(ez,{})]});case"ranked":return(0,a.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,a.jsx)(s,{title:"Classifiche & Ranked"}),(0,a.jsx)(eD,{})]});case"profiles":return(0,a.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,a.jsx)(s,{title:"Cerca Giocatore"}),(0,a.jsx)(eq,{})]});case"roleIcons":let l={},p=[];r.forEach(e=>{e.roleId?(l[e.roleId]||(l[e.roleId]=[]),l[e.roleId].push(e)):p.push(e)});let g=Object.keys(l).sort((t,r)=>{let a=e.find(e=>e.id===t),s=e.find(e=>e.id===r),l=a?a.name:t,i=s?s.name:r;return l.localeCompare(i)});return(0,a.jsxs)("div",{className:"animate-in fade-in duration-500 space-y-8 pb-20",children:[(0,a.jsx)(s,{title:"Icone Ruoli"}),g.map(t=>{let r=e.find(e=>e.id===t),s=r?r.name:t,i=l[t];return(0,a.jsxs)("div",{className:"bg-card/20 p-6 rounded-2xl border border-border/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4 border-b border-border/30 pb-2",children:[r&&r.image&&(0,a.jsx)("div",{className:"w-8 h-8 relative",children:(0,a.jsx)($.default,{src:r.image.url,alt:s,fill:!0,className:"object-contain"})}),(0,a.jsx)("h3",{className:"text-xl font-bold font-serif capitalize",children:s}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground bg-primary/10 px-2 py-0.5 rounded-full ml-auto",children:[i.length," Varianti"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-8 gap-2 md:gap-4",children:i.map(e=>(0,a.jsxs)("div",{className:"group relative aspect-square bg-card/40 rounded-xl flex items-center justify-center border border-border hover:border-primary transition-all shadow-sm hover:shadow-primary/20",children:[(0,a.jsx)("div",{className:"relative w-2/3 h-2/3",children:(0,a.jsx)($.default,{src:e.image.url,alt:e.id,fill:!0,className:"object-contain transition-transform duration-300 group-hover:scale-110"})}),(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded border ".concat("MYTHICAL"===e.rarity||"MYTHIC"===e.rarity?"bg-pink-500/20 text-pink-400 border-pink-500/30":"LEGENDARY"===e.rarity?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"EPIC"===e.rarity?"bg-purple-500/20 text-purple-400 border-purple-500/30":"RARE"===e.rarity?"bg-blue-500/20 text-blue-400 border-blue-500/30":"COMMON"===e.rarity?"bg-gray-500/20 text-gray-400 border-gray-500/30":"bg-white/10 text-white/70 border-white/20"),children:e.rarity?e.rarity.substring(0,1):"?"})})]},e.id))})]},t)}),p.length>0&&(0,a.jsxs)("div",{className:"bg-card/20 p-6 rounded-2xl border border-border/50",children:[(0,a.jsx)("h3",{className:"text-xl font-bold font-serif mb-4",children:"Altro"}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-8 gap-2 md:gap-4",children:p.map(e=>(0,a.jsx)("div",{className:"group relative aspect-square bg-card/40 rounded-xl flex items-center justify-center border border-border hover:border-primary transition-all shadow-sm hover:shadow-primary/20",children:(0,a.jsx)("div",{className:"relative w-2/3 h-2/3",children:(0,a.jsx)($.default,{src:e.image.url,alt:e.id,fill:!0,className:"object-contain transition-transform duration-300 group-hover:scale-110"})})},e.id))})]})]});case"wiki":return(0,a.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,a.jsx)(s,{title:"Wiki & Changelog"}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 opacity-50 border border-dashed border-border rounded-xl",children:[(0,a.jsx)("p",{className:"font-mono text-xl font-bold",children:"v2.3.0 - Stable"}),(0,a.jsx)("p",{className:"mt-2 text-sm",children:"Documentazione in aggiornamento..."})]})]});default:return null}})()})]})}function eX(){return(0,a.jsx)(E,{children:(0,a.jsx)(eV,{})})}},8683:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),s=r(2115),l=r(2590),i=r(1567);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(l.bL,{ref:t,className:(0,i.cn)("relative flex w-full touch-none select-none items-center",r),...s,children:[(0,a.jsx)(l.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,a.jsx)(l.Q6,{className:"absolute h-full bg-primary"})}),(0,a.jsx)(l.zi,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});o.displayName=l.bL.displayName},1567:(e,t,r)=>{"use strict";r.d(t,{N:()=>i,cn:()=>l});var a=r(3463),s=r(9795);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}function i(e){return e?e.includes("@3")?"@3":e.includes("@2")?"@2":(e.includes("@1"),"@1"):"@1"}}},e=>{var t=t=>e(e.s=t);e.O(0,[576,176,679,441,517,358],()=>t(535)),_N_E=e.O()}]);