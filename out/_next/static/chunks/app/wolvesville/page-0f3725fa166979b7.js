(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{535:(e,t,r)=>{Promise.resolve().then(r.bind(r,1924))},1924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>el});var a=r(5155),s=r(2115),l=r(8173),n=r.n(l),i=r(7364),o=r(8062);let c=[{id:"aura-seer",name:"Veggente (Offline)",description:"Vedi l'aura dei giocatori. (Dati offline)",team:"VILLAGER",aura:"GOOD",image:{url:"https://cdn.wolvesville.com/roleIcons/aura-seer.png",width:128,height:128}},{id:"werewolf",name:"Lupo Mannaro (Offline)",description:"Uccidi i villici. (Dati offline)",team:"WEREWOLF",aura:"EVIL",image:{url:"https://cdn.wolvesville.com/roleIcons/werewolf.png",width:128,height:128}}],d=[{id:"offline_set",name:"Set Offline",items:[{id:"hat_offline",type:"HAT",rarity:"COMMON",imageUrl:"https://cdn.wolvesville.com/avatarItems/hat_santa_claus.png",name:"Cappello Offline"},{id:"shirt_offline",type:"SHIRT",rarity:"COMMON",imageUrl:"https://cdn.wolvesville.com/avatarItems/shirt_santa_claus.png",name:"Maglia Offline"}]}],m=[{id:"bg_village_offline",name:"Villaggio (Offline)",rarity:"COMMON",imageUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png",imageDayUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png",imageNightUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_night.png"}],u=[{id:"loading_offline",url:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png",rarity:"COMMON"}],x=[{id:"quest_offline",name:"Quest Offline",description:"Impossibile caricare le quest. Controlla la connessione.",rewards:[{type:"GOLD",amount:100}]}],g={"aura-seer":{name:"Veggente",rarity:"COMMON",cdnUrl:"https://cdn.wolvesville.com/roleIcons/aura-seer.png"},werewolf:{name:"Lupo Mannaro",rarity:"COMMON",cdnUrl:"https://cdn.wolvesville.com/roleIcons/werewolf.png"},bg_village:{name:"Villaggio (Default)",rarity:"COMMON",cdnUrl:"https://cdn.wolvesville.com/backgrounds/wolvesville_large_day.png"}},h=function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a="https://cdn.wolvesville.com";switch(t){case"role":return"".concat(a,"/roleIcons/").concat(e,".png");case"background":if("village_day"===e)return"".concat(a,"/backgrounds/wolvesville_large_day.png");return"".concat(a,"/backgrounds/").concat(e).concat("");case"avatar":return"".concat(a,"/avatarItems/").concat(e).concat(r?"@2x.png":".png");default:return""}},p={"1wL":{category:"HAT",name:"Top Hat"}},f="https://api.wolvesville.com",v="YGNrrmPwSWjVY9lAy9y7CiBLMeRUh3pEE4CTmIvfZwnaSp6X3uiQnsVAoDkdXLYW",b="f416123a-0ca8-432f-94e4-228afdef82e2",y={},j={async fetch(e,t){let r=Date.now();if(y[e]&&r-y[e].timestamp<6e5)return y[e].data;if(!v)return console.warn("[WovEngine] No API Key. Using fallback for ".concat(e)),t;try{let a=await fetch("".concat(f).concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bot ".concat(v),...b?{"X-Bot-ID":b}:{}},next:{revalidate:3600}});if(!a.ok)return console.error("[WovEngine] API Error ".concat(a.status," for ").concat(e)),t;let s=await a.json(),l=s.items?s.items:s;return y[e]={data:l,timestamp:r},l}catch(r){return console.error("[WovEngine] Network Exception for ".concat(e),r),t}},async getRoles(){return this.fetch("/roles",c)},async getAvatarSets(){return this.fetch("/items/avatarItemSets",d)},async getAvatarItems(){return this.fetch("/items/avatarItems",[])},async getBackgrounds(){return this.fetch("/items/backgrounds",m)},async getLoadingScreens(){return this.fetch("/items/loadingScreens",u)},async getClanQuests(){return this.fetch("/clans/quests/all",x)},async searchClans(e){return this.fetch("/clans/search?name=".concat(encodeURIComponent(e)),[])},extractItems(e){if(console.log("[WovEngine] Extracting items from ".concat((null==e?void 0:e.length)||0," sets")),!e||!Array.isArray(e))return console.warn("[WovEngine] Invalid sets data:",e),[];e.length>0&&console.log("[WovDebug] First set received:",e[0]);let t=[],r=new Set;return e.forEach(e=>{e.items&&Array.isArray(e.items)?e.items.forEach(a=>{r.has(a.id)||(r.add(a.id),t.push({...a,imageUrl:this.resolveImageUrl(a.id,"avatar",a.imageUrl),name:a.name||"".concat(e.name||"Unknown Set"," Item")}))}):e.avatarItemIds&&Array.isArray(e.avatarItemIds)&&e.avatarItemIds.forEach(e=>{if(!r.has(e)){r.add(e);let a=p[e]&&p[e].category||null;t.push({id:e,name:"Item ".concat(e.substring(0,5),"..."),type:a||"CLOTHES",rarity:"COMMON",imageUrl:this.resolveImageUrl(e,"avatar",void 0,a||void 0)})}})}),console.log("[WovEngine] Extracted ".concat(t.length," unique items")),t},resolveImageUrl:(e,t,r,a)=>"avatar"===t&&e?"https://cdn.wolvesville.com/avatarItems/".concat(e,".png"):r&&!r.includes("dicebear")?r:g[e]?g[e].cdnUrl:h(e,t),async generateSharedAvatarUrl(e){if(!v)return null;try{let t={items:e.map(e=>({id:e,prio:0})),skinColorId:"default"},r=await fetch("".concat(f,"/avatars/sharedAvatar"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bot ".concat(v)},body:JSON.stringify(t)});if(!r.ok)return null;return(await r.json()).url}catch(e){return console.error("Failed to generate avatar URL",e),null}}},N=(0,s.createContext)(void 0);function w(e){return e.map(e=>{let t=function(e){try{let t=p[e.id],r=e.type||"CLOTHES",a=e.name||"Item ".concat(e.id);return t&&(t.category&&(r=t.category),t.name&&(a=t.name)),r&&"UNKNOWN"!==r||(r="CLOTHES"),{...e,type:r,name:a}}catch(t){return console.error("Error mapping item:",e.id,t),e}}(e);return t.imageUrl=j.resolveImageUrl(t.id,"avatar",t.imageUrl,t.type),t})}function A(e){let{children:t}=e,[r,l]=(0,s.useState)([]),[n,i]=(0,s.useState)([]),[o,c]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[u,x]=(0,s.useState)(null),[g,h]=(0,s.useState)({});(0,s.useEffect)(()=>{let e=!1;return async function(){try{let t;m(!0),x(null);let[r,a,s,n]=await Promise.all([j.getRoles(),j.getAvatarItems(),j.getAvatarSets(),j.getBackgrounds()]);if(e)return;l(Array.isArray(r)?r:[]),c(Array.isArray(n)?n:[]);let o=a?Array.isArray(a)?a:"object"==typeof a&&"items"in a&&Array.isArray(a.items)?a.items:[]:[];if(o.length>0)console.log("[WovContext] ✅ Direct items: ".concat(o.length)),t=w(o);else{console.log("[WovContext] ⚠️  Direct items empty – falling back to sets extraction");let e=function(e){if(!Array.isArray(e)||0===e.length)return[];let t=new Map;return e.forEach(e=>{let r=Array.isArray(e.items)?e.items:[],a=Array.isArray(e.avatarItemIds)?e.avatarItemIds:[];r.forEach(e=>{!(null==e?void 0:e.id)||t.has(e.id)||t.set(e.id,e)}),a.forEach(r=>{!r||t.has(r)||t.set(r,{id:r,name:e.name?"".concat(e.name," – ").concat(r.slice(0,8)):r,type:"CLOTHES",rarity:"COMMON",imageUrl:""})})}),Array.from(t.values())}(s);console.log("[WovContext] ✅ Items from sets: ".concat(e.length)),t=w(e)}console.log("[WovContext] \uD83C\uDFAF Total items ready for grid: ".concat(t.length)),i(t)}catch(t){if(!e){let e=t instanceof Error?t.message:String(t);console.error("[WovContext] Init failed:",e),x(e)}}finally{e||m(!1)}}(),()=>{e=!0}},[]),(0,s.useEffect)(()=>{try{let e=localStorage.getItem("wov_wardrobe");e&&h(JSON.parse(e))}catch(e){}},[]),(0,s.useEffect)(()=>{try{localStorage.setItem("wov_wardrobe",JSON.stringify(g))}catch(e){}},[g]);let p=(0,s.useCallback)(e=>{h(t=>({...t,[e.type]:e}))},[]),f=(0,s.useCallback)(e=>{h(t=>{let r={...t};return delete r[e],r})},[]),v=(0,s.useCallback)(()=>h({}),[]),b=(0,s.useCallback)(e=>Object.values(g).some(t=>t.id===e),[g]);return(0,a.jsx)(N.Provider,{value:{roles:r,items:n,backgrounds:o,loading:d,error:u,equippedItems:g,equipItem:p,unequipItem:f,clearWardrobe:v,isEquipped:b},children:t})}function C(){let e=(0,s.useContext)(N);if(!e)throw Error("useWolvesville must be used within WolvesvilleProvider");return e}var S=r(1567),k=r(858),I=r(5059),E=r(1466),O=r(2823),L=r(9323),M=r(3467);let _=[{id:"dashboard",label:"Dashboard",icon:k.A},{id:"wardrobe",label:"Guardaroba & Item",icon:I.A},{id:"roles",label:"Ruoli",icon:E.A},{id:"clans",label:"Clan & Quest",icon:O.A},{id:"backgrounds",label:"Sfondi",icon:L.A},{id:"wiki",label:"Wiki",icon:M.A}];function z(e){let{activeTab:t,onTabChange:r}=e;return(0,a.jsxs)("div",{className:"w-full md:w-64 shrink-0 flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"p-4 mb-2",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-serif gold-text tracking-tight",children:"Wolvesville DB"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground uppercase tracking-widest opacity-70",children:"Unofficial Tool"})]}),(0,a.jsx)("nav",{className:"flex flex-col gap-1 px-2",children:_.map(e=>{let s=t===e.id,l=e.icon;return(0,a.jsxs)("button",{onClick:()=>r(e.id),className:(0,S.cn)("flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200",s?"bg-primary/10 text-primary shadow-[0_0_15px_rgba(234,179,8,0.1)] border border-primary/20":"text-muted-foreground hover:bg-card/50 hover:text-foreground"),children:[(0,a.jsx)(l,{size:18,className:s?"text-primary":"opacity-70"}),(0,a.jsx)("span",{children:e.label}),s&&(0,a.jsx)("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-primary shadow-[0_0_5px_currentColor]"})]},e.id)})}),(0,a.jsx)("div",{className:"mt-auto p-4 opacity-50 text-[10px] text-center",children:"v2.4.0 • Powered by Trae"})]})}var U=r(5686),T=r(4505),R=r(4857),D=r(5565);let W=["BACK","GRAVESTONE","CLOTHES","SHIRT","PANTS","SHOES","NECK","MOUTH","EYES","HAIR","GLASSES","MASK","HAT","HAND","FRONT"];function H(){let{equippedItems:e,unequipItem:t,clearWardrobe:r}=C(),[l,n]=(0,s.useState)(!1),i=async()=>{n(!0);let t=Object.values(e).map(e=>e.id),r=await j.generateSharedAvatarUrl(t);n(!1),r?window.open(r,"_blank"):alert("Impossibile generare l'avatar. Riprova pi\xf9 tardi.")},o=0===Object.keys(e).length;return(0,a.jsxs)("div",{className:"sticky top-24 bg-card/30 backdrop-blur-md border border-border rounded-xl p-4 flex flex-col items-center gap-4 w-full",children:[(0,a.jsx)("h3",{className:"text-xl font-bold font-serif gold-text",children:"Guardaroba"}),(0,a.jsx)("div",{className:"relative w-64 h-64 bg-black/20 rounded-lg border border-white/5 overflow-hidden flex items-center justify-center",children:o?(0,a.jsx)("p",{className:"text-muted-foreground text-xs text-center px-4",children:"Seleziona oggetti dalla griglia per vestire il tuo avatar"}):(0,a.jsx)("div",{className:"relative w-full h-full",children:W.map(t=>{let r=e[t];return r?(0,a.jsx)("div",{className:"absolute inset-0 z-[var(--z)]",style:{"--z":W.indexOf(t)},children:(0,a.jsx)(D.default,{src:j.resolveImageUrl(r.id,"avatar",r.imageUrl),alt:t,fill:!0,className:"object-contain"})},t):null})})}),(0,a.jsx)("div",{className:"w-full grid grid-cols-4 gap-2",children:Object.entries(e).map(e=>{let[r,s]=e;return(0,a.jsxs)("div",{className:"relative aspect-square bg-black/40 rounded border border-white/10 p-1 group cursor-pointer",onClick:()=>t(r),title:"Rimuovi ".concat(s.name),children:[(0,a.jsx)(D.default,{src:j.resolveImageUrl(s.id,"avatar",s.imageUrl),alt:r,fill:!0,className:"object-contain"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-red-500/20 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity rounded",children:(0,a.jsx)(U.A,{size:12,className:"text-red-300"})})]},r)})}),(0,a.jsxs)("div",{className:"flex gap-2 w-full mt-2",children:[(0,a.jsxs)("button",{onClick:r,disabled:o,className:"flex-1 flex items-center justify-center gap-2 p-2 rounded bg-red-500/10 text-red-400 hover:bg-red-500/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-xs font-bold",children:[(0,a.jsx)(U.A,{size:14}),(0,a.jsx)("span",{children:"Svuota"})]}),(0,a.jsxs)("button",{onClick:i,disabled:o||l,className:"flex-[2] flex items-center justify-center gap-2 p-2 rounded bg-primary text-primary-foreground hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-xs font-bold",children:[l?(0,a.jsx)(T.A,{size:14,className:"animate-spin"}):(0,a.jsx)(R.A,{size:14}),(0,a.jsx)("span",{children:"Genera Link"})]})]})]})}var P=r(8867),G=r(853),B=r(767);let q=["ALL","HAIR","HAT","EYES","MOUTH","CLOTHES","BACK","HAND","MASK","GLASSES","SHIRT","PANTS","SHOES","NECK","FRONT","BEARD"],V=["ALL","COMMON","RARE","EPIC","LEGENDARY"],F={COMMON:"text-gray-400 border-gray-500/30 bg-gray-500/10",RARE:"text-blue-400 border-blue-500/30 bg-blue-500/10",EPIC:"text-purple-400 border-purple-500/30 bg-purple-500/10",LEGENDARY:"text-yellow-400 border-yellow-500/30 bg-yellow-500/10"},Q=e=>["https://cdn.wolvesville.com/avatarItems/".concat(e,".png"),"https://cdn.wolvesville.com/avatarItems/".concat(e,".store@3x.png"),"https://cdn.wolvesville.com/avatarItems/".concat(e,".store.png"),"https://cdn.wolvesville.com/avatarItems/v2/".concat(e,".png"),"https://cdn.wolvesville.com/avatarItems/icon_".concat(e,".png")],K=(0,s.memo)(function(e){let{itemId:t,name:r,initialUrl:l}=e,n=(0,s.useMemo)(()=>{let e=Q(t);return l&&!l.includes("dicebear")?[l,...e.filter(e=>e!==l)]:e},[t,l]),[i,o]=(0,s.useState)(0),c=(0,s.useCallback)(()=>{console.warn("[Immagine mancante]",t,n[i]),o(e=>e+1)},[t,n,i]);return i>=n.length?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white/20 text-xs bg-white/5 rounded",children:"?"}):(0,a.jsx)(D.default,{src:n[i],alt:r,fill:!0,loading:"lazy",className:"object-contain",sizes:"140px",onError:c,unoptimized:!0},n[i])}),Y=(0,s.memo)(function(e){var t,r,s;let{item:l,equipped:n,onEquip:i}=e;return(0,a.jsxs)("div",{onClick:()=>i(l),style:{width:152,height:202},className:["flex flex-col items-center rounded-lg p-2 border transition-all cursor-pointer select-none",n?"border-primary/70 bg-primary/10 shadow-[0_0_12px_hsl(43_90%_55%/0.3)]":"border-white/10 bg-black/20 hover:border-primary/40 hover:bg-black/30"].join(" "),children:[(0,a.jsxs)("div",{className:"relative w-full flex-1 mb-1",children:[(0,a.jsx)(K,{itemId:l.id,name:null!==(t=l.name)&&void 0!==t?t:"?",initialUrl:l.imageUrl}),n&&(0,a.jsx)("div",{className:"absolute top-0 right-0 bg-primary rounded-full p-0.5",children:(0,a.jsx)(P.A,{size:9,className:"text-primary-foreground"})})]}),(0,a.jsx)("span",{className:"text-[9px] uppercase font-bold px-1 py-0.5 rounded border mb-0.5 ".concat(null!==(r=F[l.rarity])&&void 0!==r?r:"text-gray-400"),children:l.rarity}),(0,a.jsx)("div",{className:"text-[10px] text-center text-white/60 truncate w-full leading-tight",children:null!==(s=l.name)&&void 0!==s?s:l.id})]})});function X(e){let{items:t,isEquipped:r,equipItem:l}=e,n=(0,s.useRef)(null),[i,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(600),[m,u]=(0,s.useState)(800);(0,s.useEffect)(()=>{let e=n.current;if(!e)return;let t=new ResizeObserver(e=>{let[t]=e;d(t.contentRect.height),u(t.contentRect.width)});return t.observe(e),d(e.clientHeight),u(e.clientWidth),()=>t.disconnect()},[]);let x=Math.max(1,Math.floor(m/160)),g=Math.ceil(t.length/x),h=Math.max(0,Math.floor(i/210)-3),p=Math.min(g-1,Math.ceil((i+c)/210)+3),f=[];for(let e=h;e<=p;e++)f.push(e);let v=(0,s.useCallback)(e=>{o(e.currentTarget.scrollTop)},[]);return(0,a.jsx)("div",{ref:n,onScroll:v,className:"overflow-y-auto overflow-x-hidden w-full h-full",style:{position:"relative"},children:(0,a.jsx)("div",{style:{height:210*g,position:"relative"},children:f.map(e=>(0,a.jsx)("div",{style:{position:"absolute",top:210*e,left:0,right:0,height:210,display:"flex",gap:8,padding:"4px 0"},children:Array.from({length:x}).map((s,n)=>{let i=e*x+n;if(i>=t.length)return(0,a.jsx)("div",{style:{width:152}},n);let o=t[i];return(0,a.jsx)(Y,{item:o,equipped:r(o.id),onEquip:l},o.id)})},e))})})}function J(e){let{items:t,loading:r}=e,{equipItem:l,isEquipped:n}=C(),[i,o]=(0,s.useState)(""),[c,d]=(0,s.useState)("ALL"),[m,u]=(0,s.useState)("ALL"),x=(0,s.useMemo)(()=>{let e=i.trim().toLowerCase();return t.filter(t=>{var r;return("ALL"===c||t.type===c)&&("ALL"===m||t.rarity===m)&&(!e||!!(t.id.toLowerCase().includes(e)||(null!==(r=t.name)&&void 0!==r?r:"").toLowerCase().includes(e)))})},[t,i,c,m]);return r?(0,a.jsxs)("div",{className:"flex items-center justify-center h-64 text-muted-foreground gap-3",children:[(0,a.jsx)(T.A,{className:"animate-spin",size:20}),(0,a.jsx)("span",{children:"Caricamento oggetti..."})]}):(0,a.jsxs)("div",{className:"flex flex-col",style:{height:"calc(100vh - 180px)",minHeight:400},children:[(0,a.jsxs)("div",{className:"shrink-0 flex flex-wrap gap-3 items-center mb-4 bg-card/20 border border-border rounded-xl p-3",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[180px]",children:[(0,a.jsx)(G.A,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none"}),(0,a.jsx)("input",{type:"text",placeholder:"Cerca per nome o ID…",value:i,onChange:e=>o(e.target.value),className:"w-full pl-8 pr-8 py-1.5 text-sm bg-input border border-border rounded-lg focus:outline-none focus:ring-1 focus:ring-primary"}),i&&(0,a.jsx)("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:(0,a.jsx)(B.A,{size:12})})]}),(0,a.jsx)("select",{value:c,onChange:e=>d(e.target.value),className:"text-sm bg-input border border-border rounded-lg px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-primary",children:q.map(e=>(0,a.jsx)("option",{value:e,children:"ALL"===e?"Tutte le categorie":e},e))}),(0,a.jsx)("select",{value:m,onChange:e=>u(e.target.value),className:"text-sm bg-input border border-border rounded-lg px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-primary",children:V.map(e=>(0,a.jsx)("option",{value:e,children:"ALL"===e?"Tutte le rarit\xe0":e},e))}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground whitespace-nowrap font-mono",children:[x.length.toLocaleString()," / ",t.length.toLocaleString()," oggetti"]})]}),0===x.length?(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center text-muted-foreground text-sm",children:"Nessun oggetto corrisponde ai filtri"}):(0,a.jsx)("div",{className:"flex-1 overflow-hidden rounded-xl border border-white/5",children:(0,a.jsx)(X,{items:x,isEquipped:n,equipItem:l})})]})}function Z(e){let{roles:t}=e,[r,l]=(0,s.useState)(""),n=Array.isArray(t)?t:Object.values(t||{}),i=n.filter(e=>(e.name||"").toLowerCase().includes(r.toLowerCase())||(e.team||"").toLowerCase().includes(r.toLowerCase()));return 0===n.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-muted-foreground border border-dashed border-border rounded-xl",children:[(0,a.jsx)("p",{className:"text-lg font-bold",children:"Nessun ruolo ricevuto dall'API"}),(0,a.jsx)("p",{className:"text-sm",children:"Riprova tra poco o verifica la connessione."})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"relative max-w-md mx-auto w-full",children:[(0,a.jsx)(G.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:18}),(0,a.jsx)("input",{type:"text",placeholder:"Cerca ruolo...",value:r,onChange:e=>l(e.target.value),className:"w-full bg-card/30 border border-border rounded-full py-3 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:i.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"group bg-card/30 border border-border rounded-xl overflow-hidden hover:border-primary/50 hover:bg-card/50 transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,a.jsx)("div",{className:"relative w-16 h-16 shrink-0 bg-black/20 rounded-lg p-2 border border-white/5",children:(0,a.jsx)(D.default,{src:j.resolveImageUrl(e.id,"role",null===(r=e.image)||void 0===r?void 0:r.url),alt:e.name||"Role Image",fill:!0,className:"object-contain drop-shadow-md group-hover:scale-110 transition-transform"})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("h3",{className:"font-bold text-lg truncate text-foreground group-hover:text-primary transition-colors",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-wider font-semibold text-muted-foreground",children:e.team}),e.aura&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold border ".concat("GOOD"===e.aura?"bg-green-500/20 text-green-400 border-green-500/30":"EVIL"===e.aura?"bg-red-500/20 text-red-400 border-red-500/30":"bg-gray-500/20 text-gray-400 border-gray-500/30"),children:e.aura})]})]})]}),e.description&&(0,a.jsx)("div",{className:"px-4 pb-4",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3 leading-relaxed",children:e.description})})]},e.id||"role-".concat(t))})}),0===i.length&&(0,a.jsx)("div",{className:"text-center py-10 opacity-50",children:"Nessun ruolo trovato."})]})}var $=r(2640),ee=r(7825),et=r(6368),er=r(98);function ea(){let[e,t]=(0,s.useState)("search"),[r,l]=(0,s.useState)([]),[n,i]=(0,s.useState)(!0),[o,c]=(0,s.useState)(""),[d,m]=(0,s.useState)([]),[u,x]=(0,s.useState)(!1),[g,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{async function e(){try{x(!0);let e=await j.searchClans("a");m(e),h(!0)}catch(e){console.error("Initial clan search failed",e)}finally{x(!1)}}(async function(){l(await j.getClanQuests()),i(!1)})(),e()},[]);let p=async e=>{if(e.preventDefault(),o.trim()){x(!0),h(!0);try{let e=await j.searchClans(o);m(e)}catch(e){console.error("Clan search failed",e),m([])}finally{x(!1)}}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-primary/20 rounded-xl text-primary",children:(0,a.jsx)($.A,{size:32})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-serif",children:"Clan & Quest"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Gestisci le missioni e cerca clan"})]})]}),(0,a.jsxs)("div",{className:"flex bg-black/20 p-1 rounded-lg border border-white/10",children:[(0,a.jsx)("button",{onClick:()=>t("search"),className:"px-4 py-2 rounded-md text-sm font-bold transition-all ".concat("search"===e?"bg-primary text-primary-foreground shadow-lg":"text-muted-foreground hover:text-foreground"),children:"Cerca Clan"}),(0,a.jsx)("button",{onClick:()=>t("quests"),className:"px-4 py-2 rounded-md text-sm font-bold transition-all ".concat("quests"===e?"bg-primary text-primary-foreground shadow-lg":"text-muted-foreground hover:text-foreground"),children:"Quest Attive"})]})]}),"search"===e?(0,a.jsxs)("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:[(0,a.jsxs)("form",{onSubmit:p,className:"relative max-w-xl mx-auto mb-8",children:[(0,a.jsx)(G.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",size:20}),(0,a.jsx)("input",{type:"text",placeholder:"Cerca un clan per nome...",value:o,onChange:e=>c(e.target.value),className:"w-full bg-card/30 border border-border rounded-full py-4 pl-12 pr-6 text-lg focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all"}),(0,a.jsx)("button",{type:"submit",disabled:u||!o.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-primary text-primary-foreground px-4 py-2 rounded-full text-sm font-bold hover:bg-primary/90 disabled:opacity-50 transition-colors",children:u?(0,a.jsx)(T.A,{className:"animate-spin",size:16}):"Cerca"})]}),g&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-bold opacity-80",children:["Risultati (",d.length,")"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.map(e=>(0,a.jsxs)("div",{className:"bg-card/20 border border-border rounded-xl p-4 flex items-center gap-4 hover:bg-card/40 transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-black/40 flex items-center justify-center border border-white/10 shrink-0",children:(e.icon,(0,a.jsx)(O.A,{size:20,className:"text-muted-foreground"}))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-lg leading-none mb-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Membri: ",e.memberCount]}),e.language&&(0,a.jsx)("span",{className:"uppercase border border-white/10 px-1 rounded",children:e.language})]}),e.description&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground/80 mt-2 line-clamp-1",children:e.description})]})]},e.id)),0===d.length&&!u&&(0,a.jsx)("div",{className:"col-span-full text-center py-10 opacity-50 border border-dashed border-border rounded-xl",children:"Nessun clan trovato con questo nome."})]})]})]}):(0,a.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-2",children:n?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse text-muted-foreground",children:[(0,a.jsx)(T.A,{className:"animate-spin mb-2"}),(0,a.jsx)("p",{children:"Caricamento Clan Quest..."})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map(e=>(0,a.jsxs)("div",{className:"bg-card/20 border border-border rounded-xl p-5 hover:bg-card/40 transition-colors",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-2 text-foreground",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground mb-2",children:"Ricompense"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.rewards.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-black/40 border border-white/10 text-sm",children:["GOLD"===e.type&&(0,a.jsx)(ee.A,{size:14,className:"text-yellow-400"}),"GEMS"===e.type&&(0,a.jsx)(et.A,{size:14,className:"text-pink-400"}),"XP"===e.type&&(0,a.jsx)(er.A,{size:14,className:"text-blue-400"}),(0,a.jsxs)("span",{className:"font-mono font-bold",children:[e.amount," ",e.type]})]},t))})]})]},e.id)),0===r.length&&(0,a.jsx)("div",{className:"col-span-full text-center py-10 opacity-50 border border-dashed border-border rounded-xl",children:"Nessuna quest attiva al momento."})]})})]})}function es(){let{roles:e,items:t,backgrounds:r,loading:l}=C(),[c,d]=(0,s.useState)("wardrobe");return(0,a.jsxs)("div",{className:"min-h-screen bg-background relative flex flex-col md:flex-row",children:[(0,a.jsx)(o.B,{}),(0,a.jsx)("div",{className:"md:hidden p-4 border-b border-border bg-background/80 backdrop-blur sticky top-0 z-50 flex items-center justify-between",children:(0,a.jsx)("span",{className:"font-bold font-serif gold-text",children:"Wolvesville DB"})}),(0,a.jsx)("div",{className:"hidden md:block sticky top-0 h-screen overflow-y-auto border-r border-border/50 bg-background/50 backdrop-blur-sm z-40",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)(n(),{href:"/",className:"flex items-center gap-2 text-muted-foreground hover:text-primary mb-6 transition-colors text-sm",children:[(0,a.jsx)(i.A,{size:16}),(0,a.jsx)("span",{children:"Torna all'Hub"})]}),(0,a.jsx)(z,{activeTab:c,onTabChange:d})]})}),(0,a.jsx)("main",{className:"flex-grow p-4 md:p-8 lg:p-10 relative z-10 overflow-x-hidden",children:(()=>{switch(c){case"dashboard":return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"p-8 rounded-2xl bg-gradient-to-br from-primary/20 via-primary/5 to-transparent border border-primary/20 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-serif font-bold mb-2",children:"Benvenuto su Wolvesville DB"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground max-w-xl",children:"Il tuo hub definitivo per esplorare ruoli, creare outfit e gestire le attivit\xe0 del clan. Sincronizzato in tempo reale con i server ufficiali."})]}),(0,a.jsx)("div",{className:"absolute -right-10 -bottom-20 opacity-20 rotate-12 pointer-events-none",children:(0,a.jsx)(D.default,{src:"https://cdn.wolvesville.com/roleIcons/werewolf.png",width:300,height:300,alt:"Werewolf"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-card/30 p-6 rounded-xl border border-border",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-1",children:e.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ruoli Indicizzati"})]}),(0,a.jsxs)("div",{className:"bg-card/30 p-6 rounded-xl border border-border",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-1",children:t.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Oggetti Cosmetici"})]}),(0,a.jsxs)("div",{className:"bg-card/30 p-6 rounded-xl border border-border",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-1",children:r.length}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sfondi Disponibili"})]})]})]});case"wardrobe":return(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row gap-8 animate-in fade-in duration-500",children:[(0,a.jsx)("div",{className:"xl:w-80 shrink-0",children:(0,a.jsx)(H,{})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold font-serif mb-6",children:"Catalogo Oggetti"}),(0,a.jsx)(J,{items:t,loading:l})]})]});case"roles":return(0,a.jsx)(Z,{roles:e});case"clans":return(0,a.jsx)(ea,{});case"backgrounds":return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in fade-in",children:r.map(e=>(0,a.jsxs)("div",{className:"group relative aspect-video rounded-xl overflow-hidden border border-border hover:border-primary transition-all",children:[(0,a.jsx)(D.default,{src:j.resolveImageUrl(e.id,"background",e.imageUrl),alt:e.name||e.id,fill:!0,className:"object-cover transition-transform duration-700 group-hover:scale-110"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent opacity-80"}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4",children:[(0,a.jsx)("h3",{className:"font-bold text-white",children:e.name||"Sfondo"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e.rarity})]})]},e.id))});case"wiki":return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:(0,a.jsx)("p",{className:"font-mono text-xl font-bold",children:"test 2.1.5 (API Build Fix)"})});default:return null}})()})]})}function el(){return(0,a.jsx)(A,{children:(0,a.jsx)(es,{})})}},8062:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var a=r(5155),s=r(2115);function l(e){let{color:t}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e;let t=r.current;if(!t)return;let a=t.getContext("2d");if(!a)return;let s=[],l=()=>{t.width=window.innerWidth,t.height=window.innerHeight};l(),window.addEventListener("resize",l);for(let e=0;e<50;e++)s.push({x:Math.random()*t.width,y:Math.random()*t.height,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:2*Math.random()+.5,opacity:.5*Math.random()+.1,hue:Math.random()>.7?43:270});let n=()=>{for(let e of(a.clearRect(0,0,t.width,t.height),s))e.x+=e.vx,e.y+=e.vy,e.x<0&&(e.x=t.width),e.x>t.width&&(e.x=0),e.y<0&&(e.y=t.height),e.y>t.height&&(e.y=0),a.beginPath(),a.arc(e.x,e.y,e.size,0,2*Math.PI),a.fillStyle=43===e.hue?"hsla(43, 90%, 55%, ".concat(e.opacity,")"):"hsla(270, 60%, 50%, ".concat(e.opacity,")"),a.fill();for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++){let r=s[e].x-s[t].x,l=s[e].y-s[t].y,n=Math.sqrt(r*r+l*l);n<120&&(a.beginPath(),a.moveTo(s[e].x,s[e].y),a.lineTo(s[t].x,s[t].y),a.strokeStyle="hsla(43, 90%, 55%, ".concat(.05*(1-n/120),")"),a.lineWidth=.5,a.stroke())}e=requestAnimationFrame(n)};return n(),()=>{cancelAnimationFrame(e),window.removeEventListener("resize",l)}},[]),(0,a.jsx)("canvas",{ref:r,className:"pointer-events-none fixed inset-0 z-0","aria-hidden":"true"})}},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(3463),s=r(9795);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[1,150,441,517,358],()=>t(535)),_N_E=e.O()}]);